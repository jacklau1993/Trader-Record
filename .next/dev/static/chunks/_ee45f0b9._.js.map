{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/components/ui/card.tsx"],"sourcesContent":["import * as React from \"react\";\nimport { cn } from \"@/lib/utils\";\n\nconst Card = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n    ({ className, ...props }, ref) => (\n        <div\n            ref={ref}\n            className={cn(\"rounded-xl border border-border bg-card text-card-foreground shadow-sm\", className)}\n            {...props}\n        />\n    )\n);\nCard.displayName = \"Card\";\n\nconst CardHeader = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n    ({ className, ...props }, ref) => (\n        <div ref={ref} className={cn(\"flex flex-col space-y-1.5 p-6\", className)} {...props} />\n    )\n);\nCardHeader.displayName = \"CardHeader\";\n\nconst CardTitle = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLHeadingElement>>(\n    ({ className, ...props }, ref) => (\n        <h3 ref={ref} className={cn(\"font-semibold leading-none tracking-tight\", className)} {...props} />\n    )\n);\nCardTitle.displayName = \"CardTitle\";\n\nconst CardDescription = React.forwardRef<HTMLParagraphElement, React.HTMLAttributes<HTMLParagraphElement>>(\n    ({ className, ...props }, ref) => (\n        <p\n            ref={ref}\n            className={cn(\"text-sm text-muted-foreground\", className)}\n            {...props}\n        />\n    )\n);\nCardDescription.displayName = \"CardDescription\";\n\nconst CardContent = React.forwardRef<HTMLDivElement, React.HTMLAttributes<HTMLDivElement>>(\n    ({ className, ...props }, ref) => (\n        <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n    )\n);\nCardContent.displayName = \"CardContent\";\n\nexport { Card, CardHeader, CardTitle, CardDescription, CardContent };\n"],"names":[],"mappings":";;;;;;;;;;;;;AAAA;AACA;;;;AAEA,MAAM,qBAAO,2KAAgB,MACzB,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACtB,6LAAC;QACG,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,0EAA0E;QACvF,GAAG,KAAK;;;;;;;AAIrB,KAAK,WAAW,GAAG;AAEnB,MAAM,2BAAa,2KAAgB,OAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACtB,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAAa,GAAG,KAAK;;;;;;;AAG3F,WAAW,WAAW,GAAG;AAEzB,MAAM,0BAAY,2KAAgB,OAC9B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACtB,6LAAC;QAAG,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,6CAA6C;QAAa,GAAG,KAAK;;;;;;;AAGtG,UAAU,WAAW,GAAG;AAExB,MAAM,gCAAkB,2KAAgB,OACpC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACtB,6LAAC;QACG,KAAK;QACL,WAAW,IAAA,qHAAE,EAAC,iCAAiC;QAC9C,GAAG,KAAK;;;;;;;AAIrB,gBAAgB,WAAW,GAAG;AAE9B,MAAM,4BAAc,2KAAgB,OAChC,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE,oBACtB,6LAAC;QAAI,KAAK;QAAK,WAAW,IAAA,qHAAE,EAAC,YAAY;QAAa,GAAG,KAAK;;;;;;;AAGtE,YAAY,WAAW,GAAG"}},
    {"offset": {"line": 96, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/components/dashboard/StatCard.tsx"],"sourcesContent":["import { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { LucideIcon } from \"lucide-react\";\n\ninterface StatCardProps {\n    title: string;\n    value: string | number;\n    icon: LucideIcon;\n    trend?: string;\n    trendUp?: boolean;\n}\n\nexport function StatCard({ title, value, icon: Icon, trend, trendUp }: StatCardProps) {\n    return (\n        <Card>\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle className=\"text-sm font-medium text-muted-foreground\">{title}</CardTitle>\n                <Icon className=\"h-4 w-4 text-muted-foreground\" />\n            </CardHeader>\n            <CardContent>\n                <div className=\"text-2xl font-bold\">{value}</div>\n                {trend && (\n                    <p className={`text-xs ${trendUp ? \"text-green-500\" : \"text-red-500\"} flex items-center mt-1`}>\n                        {trend}\n                    </p>\n                )}\n            </CardContent>\n        </Card>\n    );\n}\n"],"names":[],"mappings":";;;;;AAAA;;;AAWO,SAAS,SAAS,EAAE,KAAK,EAAE,KAAK,EAAE,MAAM,IAAI,EAAE,KAAK,EAAE,OAAO,EAAiB;IAChF,qBACI,6LAAC,oIAAI;;0BACD,6LAAC,0IAAU;gBAAC,WAAU;;kCAClB,6LAAC,yIAAS;wBAAC,WAAU;kCAA6C;;;;;;kCAClE,6LAAC;wBAAK,WAAU;;;;;;;;;;;;0BAEpB,6LAAC,2IAAW;;kCACR,6LAAC;wBAAI,WAAU;kCAAsB;;;;;;oBACpC,uBACG,6LAAC;wBAAE,WAAW,CAAC,QAAQ,EAAE,UAAU,mBAAmB,eAAe,uBAAuB,CAAC;kCACxF;;;;;;;;;;;;;;;;;;AAMzB;KAjBgB"}},
    {"offset": {"line": 172, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/components/dashboard/ProfitChart.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { ResponsiveContainer, AreaChart, Area, XAxis, YAxis, CartesianGrid, Tooltip } from \"recharts\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Trade } from \"@/lib/types\";\nimport { format, parseISO, compareAsc } from \"date-fns\";\n\nexport function ProfitChart({ trades }: { trades: Trade[] }) {\n    const data = useMemo(() => {\n        if (trades.length === 0) return [];\n\n        // Aggregate by date\n        const dailyPnl: Record<string, number> = {};\n        trades.forEach(t => {\n            const date = t.date;\n            dailyPnl[date] = (dailyPnl[date] || 0) + t.pnl;\n        });\n\n        // Create sorted array and compute cumulative\n        const sortedDates = Object.keys(dailyPnl).sort((a, b) => compareAsc(parseISO(a), parseISO(b)));\n\n        let cumulative = 0;\n        return sortedDates.map(date => {\n            cumulative += dailyPnl[date];\n            return {\n                date: format(parseISO(date), 'MMM dd'),\n                pl: cumulative, // Cumulative P&L\n                daily: dailyPnl[date]\n            };\n        });\n    }, [trades]);\n\n    return (\n        <Card className=\"col-span-4\">\n            <CardHeader>\n                <CardTitle>Cumulative Net P&L</CardTitle>\n            </CardHeader>\n            <CardContent className=\"pl-2\">\n                <div className=\"h-[300px]\">\n                    {data.length > 0 ? (\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                            <AreaChart data={data}>\n                                <defs>\n                                    <linearGradient id=\"colorPl\" x1=\"0\" y1=\"0\" x2=\"0\" y2=\"1\">\n                                        <stop offset=\"5%\" stopColor=\"#3b82f6\" stopOpacity={0.8} />\n                                        <stop offset=\"95%\" stopColor=\"#3b82f6\" stopOpacity={0} />\n                                    </linearGradient>\n                                </defs>\n                                <XAxis\n                                    dataKey=\"date\"\n                                    stroke=\"#64748b\"\n                                    fontSize={12}\n                                    tickLine={false}\n                                    axisLine={false}\n                                />\n                                <YAxis\n                                    stroke=\"#64748b\"\n                                    fontSize={12}\n                                    tickLine={false}\n                                    axisLine={false}\n                                    tickFormatter={(value) => `$${value}`}\n                                />\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#334155\" vertical={false} />\n                                <Tooltip\n                                    contentStyle={{ backgroundColor: '#1e293b', border: 'none', borderRadius: '8px', color: '#f8fafc' }}\n                                    itemStyle={{ color: '#f8fafc' }}\n                                    formatter={(value: any) => [`$${value}`, \"Net P&L\"]}\n                                />\n                                <Area\n                                    type=\"monotone\"\n                                    dataKey=\"pl\"\n                                    stroke=\"#3b82f6\"\n                                    strokeWidth={2}\n                                    fillOpacity={1}\n                                    fill=\"url(#colorPl)\"\n                                />\n                            </AreaChart>\n                        </ResponsiveContainer>\n                    ) : (\n                        <div className=\"flex h-full items-center justify-center text-muted-foreground\">\n                            No data available\n                        </div>\n                    )}\n                </div>\n            </CardContent>\n        </Card>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;;;AANA;;;;;AAQO,SAAS,YAAY,EAAE,MAAM,EAAuB;;IACvD,MAAM,OAAO,IAAA,wKAAO;qCAAC;YACjB,IAAI,OAAO,MAAM,KAAK,GAAG,OAAO,EAAE;YAElC,oBAAoB;YACpB,MAAM,WAAmC,CAAC;YAC1C,OAAO,OAAO;6CAAC,CAAA;oBACX,MAAM,OAAO,EAAE,IAAI;oBACnB,QAAQ,CAAC,KAAK,GAAG,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC,IAAI,EAAE,GAAG;gBAClD;;YAEA,6CAA6C;YAC7C,MAAM,cAAc,OAAO,IAAI,CAAC,UAAU,IAAI;yDAAC,CAAC,GAAG,IAAM,IAAA,0JAAU,EAAC,IAAA,sJAAQ,EAAC,IAAI,IAAA,sJAAQ,EAAC;;YAE1F,IAAI,aAAa;YACjB,OAAO,YAAY,GAAG;6CAAC,CAAA;oBACnB,cAAc,QAAQ,CAAC,KAAK;oBAC5B,OAAO;wBACH,MAAM,IAAA,kKAAM,EAAC,IAAA,sJAAQ,EAAC,OAAO;wBAC7B,IAAI;wBACJ,OAAO,QAAQ,CAAC,KAAK;oBACzB;gBACJ;;QACJ;oCAAG;QAAC;KAAO;IAEX,qBACI,6LAAC,oIAAI;QAAC,WAAU;;0BACZ,6LAAC,0IAAU;0BACP,cAAA,6LAAC,yIAAS;8BAAC;;;;;;;;;;;0BAEf,6LAAC,2IAAW;gBAAC,WAAU;0BACnB,cAAA,6LAAC;oBAAI,WAAU;8BACV,KAAK,MAAM,GAAG,kBACX,6LAAC,6LAAmB;wBAAC,OAAM;wBAAO,QAAO;kCACrC,cAAA,6LAAC,qKAAS;4BAAC,MAAM;;8CACb,6LAAC;8CACG,cAAA,6LAAC;wCAAe,IAAG;wCAAU,IAAG;wCAAI,IAAG;wCAAI,IAAG;wCAAI,IAAG;;0DACjD,6LAAC;gDAAK,QAAO;gDAAK,WAAU;gDAAU,aAAa;;;;;;0DACnD,6LAAC;gDAAK,QAAO;gDAAM,WAAU;gDAAU,aAAa;;;;;;;;;;;;;;;;;8CAG5D,6LAAC,iKAAK;oCACF,SAAQ;oCACR,QAAO;oCACP,UAAU;oCACV,UAAU;oCACV,UAAU;;;;;;8CAEd,6LAAC,iKAAK;oCACF,QAAO;oCACP,UAAU;oCACV,UAAU;oCACV,UAAU;oCACV,eAAe,CAAC,QAAU,CAAC,CAAC,EAAE,OAAO;;;;;;8CAEzC,6LAAC,iLAAa;oCAAC,iBAAgB;oCAAM,QAAO;oCAAU,UAAU;;;;;;8CAChE,6LAAC,qKAAO;oCACJ,cAAc;wCAAE,iBAAiB;wCAAW,QAAQ;wCAAQ,cAAc;wCAAO,OAAO;oCAAU;oCAClG,WAAW;wCAAE,OAAO;oCAAU;oCAC9B,WAAW,CAAC,QAAe;4CAAC,CAAC,CAAC,EAAE,OAAO;4CAAE;yCAAU;;;;;;8CAEvD,6LAAC,+JAAI;oCACD,MAAK;oCACL,SAAQ;oCACR,QAAO;oCACP,aAAa;oCACb,aAAa;oCACb,MAAK;;;;;;;;;;;;;;;;6CAKjB,6LAAC;wBAAI,WAAU;kCAAgE;;;;;;;;;;;;;;;;;;;;;;AAQvG;GAhFgB;KAAA"}},
    {"offset": {"line": 399, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/components/dashboard/DailyProfitChart.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo } from \"react\";\nimport { ResponsiveContainer, BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, Cell, ReferenceLine } from \"recharts\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Trade } from \"@/lib/types\";\nimport { format, parseISO, compareAsc } from \"date-fns\";\n\nexport function DailyProfitChart({ trades }: { trades: Trade[] }) {\n    const data = useMemo(() => {\n        if (trades.length === 0) return [];\n\n        const dailyPnl: Record<string, number> = {};\n        trades.forEach(t => {\n            const date = t.date;\n            dailyPnl[date] = (dailyPnl[date] || 0) + t.pnl;\n        });\n\n        const sortedDates = Object.keys(dailyPnl).sort((a, b) => compareAsc(parseISO(a), parseISO(b)));\n\n        // Take the last 30 days of activity ideally, or all\n        return sortedDates.map(date => ({\n            date: format(parseISO(date), 'MMM dd'),\n            pl: dailyPnl[date]\n        }));\n    }, [trades]);\n\n    return (\n        <Card className=\"col-span-4\">\n            <CardHeader>\n                <CardTitle>Daily Net P&L</CardTitle>\n            </CardHeader>\n            <CardContent className=\"pl-2\">\n                <div className=\"h-[250px]\">\n                    {data.length > 0 ? (\n                        <ResponsiveContainer width=\"100%\" height=\"100%\">\n                            <BarChart data={data}>\n                                <CartesianGrid strokeDasharray=\"3 3\" stroke=\"#334155\" vertical={false} />\n                                <XAxis\n                                    dataKey=\"date\"\n                                    stroke=\"#64748b\"\n                                    fontSize={12}\n                                    tickLine={false}\n                                    axisLine={false}\n                                />\n                                <YAxis\n                                    stroke=\"#64748b\"\n                                    fontSize={12}\n                                    tickLine={false}\n                                    axisLine={false}\n                                    tickFormatter={(value) => `$${value}`}\n                                />\n                                <Tooltip\n                                    contentStyle={{ backgroundColor: '#1e293b', border: 'none', borderRadius: '8px', color: '#f8fafc' }}\n                                    cursor={{ fill: '#334155', opacity: 0.2 }}\n                                    formatter={(value: any) => [`$${value}`, \"Net P&L\"]}\n                                />\n                                <ReferenceLine y={0} stroke=\"#64748b\" />\n                                <Bar dataKey=\"pl\">\n                                    {data.map((entry, index) => (\n                                        <Cell key={`cell-${index}`} fill={entry.pl >= 0 ? '#22c55e' : '#ef4444'} />\n                                    ))}\n                                </Bar>\n                            </BarChart>\n                        </ResponsiveContainer>\n                    ) : (\n                        <div className=\"flex h-full items-center justify-center text-muted-foreground\">\n                            No data available\n                        </div>\n                    )}\n                </div>\n            </CardContent>\n        </Card>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AACA;AAEA;AAAA;AAAA;;;AANA;;;;;AAQO,SAAS,iBAAiB,EAAE,MAAM,EAAuB;;IAC5D,MAAM,OAAO,IAAA,wKAAO;0CAAC;YACjB,IAAI,OAAO,MAAM,KAAK,GAAG,OAAO,EAAE;YAElC,MAAM,WAAmC,CAAC;YAC1C,OAAO,OAAO;kDAAC,CAAA;oBACX,MAAM,OAAO,EAAE,IAAI;oBACnB,QAAQ,CAAC,KAAK,GAAG,CAAC,QAAQ,CAAC,KAAK,IAAI,CAAC,IAAI,EAAE,GAAG;gBAClD;;YAEA,MAAM,cAAc,OAAO,IAAI,CAAC,UAAU,IAAI;8DAAC,CAAC,GAAG,IAAM,IAAA,0JAAU,EAAC,IAAA,sJAAQ,EAAC,IAAI,IAAA,sJAAQ,EAAC;;YAE1F,oDAAoD;YACpD,OAAO,YAAY,GAAG;kDAAC,CAAA,OAAQ,CAAC;wBAC5B,MAAM,IAAA,kKAAM,EAAC,IAAA,sJAAQ,EAAC,OAAO;wBAC7B,IAAI,QAAQ,CAAC,KAAK;oBACtB,CAAC;;QACL;yCAAG;QAAC;KAAO;IAEX,qBACI,6LAAC,oIAAI;QAAC,WAAU;;0BACZ,6LAAC,0IAAU;0BACP,cAAA,6LAAC,yIAAS;8BAAC;;;;;;;;;;;0BAEf,6LAAC,2IAAW;gBAAC,WAAU;0BACnB,cAAA,6LAAC;oBAAI,WAAU;8BACV,KAAK,MAAM,GAAG,kBACX,6LAAC,6LAAmB;wBAAC,OAAM;wBAAO,QAAO;kCACrC,cAAA,6LAAC,mKAAQ;4BAAC,MAAM;;8CACZ,6LAAC,iLAAa;oCAAC,iBAAgB;oCAAM,QAAO;oCAAU,UAAU;;;;;;8CAChE,6LAAC,iKAAK;oCACF,SAAQ;oCACR,QAAO;oCACP,UAAU;oCACV,UAAU;oCACV,UAAU;;;;;;8CAEd,6LAAC,iKAAK;oCACF,QAAO;oCACP,UAAU;oCACV,UAAU;oCACV,UAAU;oCACV,eAAe,CAAC,QAAU,CAAC,CAAC,EAAE,OAAO;;;;;;8CAEzC,6LAAC,qKAAO;oCACJ,cAAc;wCAAE,iBAAiB;wCAAW,QAAQ;wCAAQ,cAAc;wCAAO,OAAO;oCAAU;oCAClG,QAAQ;wCAAE,MAAM;wCAAW,SAAS;oCAAI;oCACxC,WAAW,CAAC,QAAe;4CAAC,CAAC,CAAC,EAAE,OAAO;4CAAE;yCAAU;;;;;;8CAEvD,6LAAC,iLAAa;oCAAC,GAAG;oCAAG,QAAO;;;;;;8CAC5B,6LAAC,6JAAG;oCAAC,SAAQ;8CACR,KAAK,GAAG,CAAC,CAAC,OAAO,sBACd,6LAAC,+JAAI;4CAAuB,MAAM,MAAM,EAAE,IAAI,IAAI,YAAY;2CAAnD,CAAC,KAAK,EAAE,OAAO;;;;;;;;;;;;;;;;;;;;6CAM1C,6LAAC;wBAAI,WAAU;kCAAgE;;;;;;;;;;;;;;;;;;;;;;AAQvG;GAlEgB;KAAA"}},
    {"offset": {"line": 596, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/components/dashboard/CalendarHeatmap.tsx"],"sourcesContent":["\"use client\";\n\nimport { useMemo, useState } from \"react\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { startOfMonth, endOfMonth, eachDayOfInterval, format, getDay, addMonths, subMonths, isSameDay } from \"date-fns\";\nimport { cn } from \"@/lib/utils\";\nimport { Trade } from \"@/lib/types\";\nimport { ChevronLeft, ChevronRight } from \"lucide-react\";\n\nexport function CalendarHeatmap({ trades }: { trades: Trade[] }) {\n    const [currentDate, setCurrentDate] = useState(new Date());\n\n    const { weeks, dailyData, weeklyStats, currentMonthLabel } = useMemo(() => {\n        // 1. Map trades to daily P&L and Count\n        const dailyMap: Record<string, { pnl: number, count: number }> = {};\n\n        trades.forEach(t => {\n            if (!dailyMap[t.date]) dailyMap[t.date] = { pnl: 0, count: 0 };\n            dailyMap[t.date].pnl += t.pnl;\n            dailyMap[t.date].count += 1;\n        });\n\n        // 2. Build Calendar Grid\n        const start = startOfMonth(currentDate);\n        const end = endOfMonth(currentDate);\n\n        const daysInMonth = eachDayOfInterval({ start, end });\n        let startDayOfWeek = getDay(start); // Sun=0, Mon=1...\n        startDayOfWeek = startDayOfWeek === 0 ? 6 : startDayOfWeek - 1;\n\n        const days = Array(startDayOfWeek).fill(null).concat(daysInMonth);\n\n        // 3. Calculate Weekly Stats\n        const weeks: (Date | null)[][] = [];\n        for (let i = 0; i < days.length; i += 7) {\n            let chunk = days.slice(i, i + 7);\n            if (chunk.length < 7) {\n                chunk = chunk.concat(Array(7 - chunk.length).fill(null));\n            }\n            weeks.push(chunk);\n        }\n\n        const weeklyStatsData = weeks.map(week => {\n            let pnl = 0;\n            let count = 0;\n            week.forEach(day => {\n                if (day) {\n                    const dateStr = format(day, \"yyyy-MM-dd\");\n                    const data = dailyMap[dateStr];\n                    if (data) {\n                        pnl += data.pnl;\n                        count += data.count;\n                    }\n                }\n            });\n            return { pnl, count };\n        });\n\n        return {\n            weeks,\n            dailyData: dailyMap,\n            weeklyStats: weeklyStatsData,\n            currentMonthLabel: format(currentDate, 'MMMM yyyy')\n        };\n    }, [trades, currentDate]);\n\n    return (\n        <Card className=\"col-span-3\">\n            <CardHeader className=\"flex flex-row items-center justify-between space-y-0 pb-2\">\n                <CardTitle>{currentMonthLabel}</CardTitle>\n                <div className=\"flex items-center space-x-2\">\n                    <button onClick={() => setCurrentDate(subMonths(currentDate, 1))} className=\"p-1 hover:bg-muted rounded text-muted-foreground hover:text-foreground\"><ChevronLeft className=\"h-4 w-4\" /></button>\n                    <button onClick={() => setCurrentDate(new Date())} className=\"text-xs text-primary hover:underline\">Today</button>\n                    <button onClick={() => setCurrentDate(addMonths(currentDate, 1))} className=\"p-1 hover:bg-muted rounded text-muted-foreground hover:text-foreground\"><ChevronRight className=\"h-4 w-4\" /></button>\n                </div>\n            </CardHeader>\n            <CardContent>\n                {/* Header Row */}\n                <div className=\"grid grid-cols-8 gap-2 text-center text-xs text-muted-foreground mb-2 font-medium\">\n                    <div>Mon</div><div>Tue</div><div>Wed</div><div>Thu</div><div>Fri</div><div>Sat</div><div>Sun</div>\n                    <div className=\"text-primary font-bold\">Wkly</div>\n                </div>\n\n                {/* Weeks Rows */}\n                <div className=\"space-y-2\">\n                    {weeks.map((week, weekIndex) => (\n                        <div key={weekIndex} className=\"grid grid-cols-8 gap-2\">\n                            {/* Days */}\n                            {week.map((day, dayIndex) => {\n                                let content = <div className=\"aspect-square\" />;\n\n                                if (day) {\n                                    const dateStr = format(day, \"yyyy-MM-dd\");\n                                    const data = dailyData[dateStr];\n                                    const pnl = data?.pnl;\n\n                                    let bgClass = \"bg-secondary\";\n                                    if (pnl && pnl > 0) bgClass = \"bg-green-500/20 text-green-500 border-green-500/50\";\n                                    else if (pnl && pnl < 0) bgClass = \"bg-red-500/20 text-red-500 border-red-500/50\";\n\n                                    const isToday = isSameDay(day, new Date());\n                                    const todayClass = isToday ? \"ring-2 ring-primary ring-offset-2 ring-offset-background\" : \"\";\n\n                                    content = (\n                                        <div\n                                            className={cn(\n                                                \"aspect-square flex flex-col items-center justify-center rounded-md border border-transparent transition-all hover:scale-105 cursor-pointer relative\",\n                                                bgClass, todayClass\n                                            )}\n                                            title={`${dateStr}: $${pnl || 0}`}\n                                        >\n                                            <div className=\"text-sm font-bold\">{format(day, \"d\")}</div> {/* Increased Size */}\n                                            {pnl !== undefined && pnl !== 0 && (\n                                                <div className=\"text-[10px] font-semibold leading-none mt-1\">\n                                                    {pnl > 0 ? \"+\" : \"\"}{Math.round(pnl)}\n                                                </div>\n                                            )}\n                                        </div>\n                                    );\n                                }\n\n                                return <div key={dayIndex}>{content}</div>;\n                            })}\n\n                            {/* Weekly Stat - HIGHLIGHTED */}\n                            <div className=\"aspect-square flex flex-col items-center justify-center rounded-lg bg-muted/40 border border-border\">\n                                {weeklyStats[weekIndex].count > 0 ? (\n                                    <>\n                                        <span className={cn(\"font-bold text-sm\", weeklyStats[weekIndex].pnl > 0 ? \"text-green-500\" : (weeklyStats[weekIndex].pnl < 0 ? \"text-red-500\" : \"text-foreground\"))}>\n                                            {weeklyStats[weekIndex].pnl > 0 ? \"+\" : \"\"}{Math.round(weeklyStats[weekIndex].pnl / 1000)}k\n                                        </span>\n                                        <span className=\"text-[10px] text-muted-foreground font-medium\">{weeklyStats[weekIndex].count} trades</span>\n                                    </>\n                                ) : (\n                                    <span className=\"text-xs text-muted-foreground/30\">-</span>\n                                )}\n                            </div>\n                        </div>\n                    ))}\n                </div>\n            </CardContent>\n        </Card>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 963, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/components/dashboard/RecentTrades.tsx"],"sourcesContent":["\"use client\";\n\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Trade } from \"@/lib/types\";\nimport { format } from \"date-fns\";\n\nexport function RecentTrades({ trades }: { trades: Trade[] }) {\n    // Sort trades by date descending and take top 6\n    const recentTrades = [...trades].sort((a, b) => new Date(b.date).getTime() - new Date(a.date).getTime()).slice(0, 6);\n\n    return (\n        <Card className=\"col-span-3\">\n            <CardHeader>\n                <CardTitle>Recent Trades</CardTitle>\n            </CardHeader>\n            <CardContent>\n                <div className=\"space-y-4\">\n                    {recentTrades.length === 0 ? (\n                        <div className=\"text-sm text-muted-foreground text-center py-4\">No recent trades</div>\n                    ) : (\n                        recentTrades.map(trade => (\n                            <div key={trade.id} className=\"flex items-center justify-between border-b border-border pb-3 last:border-0 last:pb-0\">\n                                <div className=\"flex flex-col\">\n                                    <div className=\"flex items-center space-x-2\">\n                                        <span className=\"font-bold text-sm\">{trade.ticker}</span>\n                                        <span className={`text-[10px] px-1.5 py-0.5 rounded ${trade.type === 'Long' ? 'bg-green-500/10 text-green-500' : 'bg-red-500/10 text-red-500'}`}>\n                                            {trade.type}\n                                        </span>\n                                    </div>\n                                    <span className=\"text-xs text-muted-foreground\">{format(new Date(trade.date), 'MMM dd')}</span>\n                                </div>\n                                <div className={`font-mono font-medium text-sm ${trade.pnl > 0 ? 'text-green-500' : 'text-red-500'}`}>\n                                    {trade.pnl > 0 ? \"+\" : \"\"}${trade.pnl.toFixed(2)}\n                                </div>\n                            </div>\n                        ))\n                    )}\n                </div>\n            </CardContent>\n        </Card>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AAEA;AAJA;;;;AAMO,SAAS,aAAa,EAAE,MAAM,EAAuB;IACxD,gDAAgD;IAChD,MAAM,eAAe;WAAI;KAAO,CAAC,IAAI,CAAC,CAAC,GAAG,IAAM,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO,KAAK,IAAI,KAAK,EAAE,IAAI,EAAE,OAAO,IAAI,KAAK,CAAC,GAAG;IAElH,qBACI,6LAAC,oIAAI;QAAC,WAAU;;0BACZ,6LAAC,0IAAU;0BACP,cAAA,6LAAC,yIAAS;8BAAC;;;;;;;;;;;0BAEf,6LAAC,2IAAW;0BACR,cAAA,6LAAC;oBAAI,WAAU;8BACV,aAAa,MAAM,KAAK,kBACrB,6LAAC;wBAAI,WAAU;kCAAiD;;;;;+BAEhE,aAAa,GAAG,CAAC,CAAA,sBACb,6LAAC;4BAAmB,WAAU;;8CAC1B,6LAAC;oCAAI,WAAU;;sDACX,6LAAC;4CAAI,WAAU;;8DACX,6LAAC;oDAAK,WAAU;8DAAqB,MAAM,MAAM;;;;;;8DACjD,6LAAC;oDAAK,WAAW,CAAC,kCAAkC,EAAE,MAAM,IAAI,KAAK,SAAS,mCAAmC,8BAA8B;8DAC1I,MAAM,IAAI;;;;;;;;;;;;sDAGnB,6LAAC;4CAAK,WAAU;sDAAiC,IAAA,kKAAM,EAAC,IAAI,KAAK,MAAM,IAAI,GAAG;;;;;;;;;;;;8CAElF,6LAAC;oCAAI,WAAW,CAAC,8BAA8B,EAAE,MAAM,GAAG,GAAG,IAAI,mBAAmB,gBAAgB;;wCAC/F,MAAM,GAAG,GAAG,IAAI,MAAM;wCAAG;wCAAE,MAAM,GAAG,CAAC,OAAO,CAAC;;;;;;;;2BAX5C,MAAM,EAAE;;;;;;;;;;;;;;;;;;;;;AAoB9C;KAnCgB"}},
    {"offset": {"line": 1095, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/components/ui/modal.tsx"],"sourcesContent":["\"use client\";\n\nimport { X } from \"lucide-react\";\nimport { useEffect, useState } from \"react\";\nimport { createPortal } from \"react-dom\";\n\nexport function Modal({ isOpen, onClose, children }: { isOpen: boolean; onClose: () => void; children: React.ReactNode }) {\n    const [mounted, setMounted] = useState(false);\n\n    useEffect(() => setMounted(true), []);\n\n    if (!isOpen || !mounted) return null;\n\n    return createPortal(\n        <div className=\"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm\">\n            <div className=\"w-full max-w-lg rounded-xl border border-border bg-card p-6 shadow-lg relative max-h-[90vh] overflow-y-auto\">\n                <button onClick={onClose} className=\"absolute right-4 top-4 text-muted-foreground hover:text-foreground\">\n                    <X className=\"h-4 w-4\" />\n                </button>\n                {children}\n            </div>\n        </div>,\n        document.body\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;;;AAJA;;;;AAMO,SAAS,MAAM,EAAE,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAuE;;IACpH,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,yKAAQ,EAAC;IAEvC,IAAA,0KAAS;2BAAC,IAAM,WAAW;0BAAO,EAAE;IAEpC,IAAI,CAAC,UAAU,CAAC,SAAS,OAAO;IAEhC,qBAAO,IAAA,oLAAY,gBACf,6LAAC;QAAI,WAAU;kBACX,cAAA,6LAAC;YAAI,WAAU;;8BACX,6LAAC;oBAAO,SAAS;oBAAS,WAAU;8BAChC,cAAA,6LAAC,oMAAC;wBAAC,WAAU;;;;;;;;;;;gBAEhB;;;;;;;;;;;cAGT,SAAS,IAAI;AAErB;GAlBgB;KAAA"}},
    {"offset": {"line": 1160, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/app/actions/trade-actions.ts"],"sourcesContent":["\"use server\";\n\nimport { auth } from \"@/lib/auth\";\nimport { headers } from \"next/headers\";\nimport { getDb } from \"@/lib/db\";\nimport { trades, tradeTags } from \"@/db/schema\";\nimport { eq, desc, and, inArray } from \"drizzle-orm\";\nimport { revalidatePath } from \"next/cache\";\n\n// Helper to get authenticated user\nasync function getUser() {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n    if (!session?.user) {\n        throw new Error(\"Unauthorized\");\n    }\n    return session.user;\n}\n\nexport async function getTrades() {\n    const user = await getUser();\n    const db = getDb();\n\n    // 1. Fetch trades\n    const userTrades = await db.select()\n        .from(trades)\n        .where(eq(trades.userId, user.id))\n        .orderBy(desc(trades.date));\n\n    // 2. Fetch tags for these trades\n    // We can do this efficiently by fetching all trade_tags for these trade IDs\n    const tradeIds = userTrades.map(t => t.id);\n    let tagsMap: Record<string, string[]> = {};\n\n    if (tradeIds.length > 0) {\n        const relatedTags = await db.select()\n            .from(tradeTags)\n            .where(inArray(tradeTags.tradeId, tradeIds));\n\n        relatedTags.forEach(rt => {\n            if (!tagsMap[rt.tradeId]) tagsMap[rt.tradeId] = [];\n            tagsMap[rt.tradeId].push(rt.tagId);\n        });\n    }\n\n    // 3. Merge\n    return userTrades.map(t => ({\n        ...t,\n        tags: tagsMap[t.id] || []\n    }));\n}\n\nexport async function getTrade(id: string) {\n    const user = await getUser();\n    const db = getDb();\n\n    const trade = await db.select().from(trades).where(and(eq(trades.id, id), eq(trades.userId, user.id))).get();\n\n    if (!trade) return null;\n\n    const tags = await db.select().from(tradeTags).where(eq(tradeTags.tradeId, id));\n\n    return {\n        ...trade,\n        tags: tags.map(t => t.tagId)\n    };\n}\n\n// Define Input Type\ntype CreateTradeInput = Omit<typeof trades.$inferInsert, \"userId\"> & { tags?: string[] };\n\nexport async function createTrade(data: CreateTradeInput) {\n    const user = await getUser();\n    const db = getDb();\n\n    const { tags: tagIds, ...tradeData } = data;\n\n    // Force userId to match session\n    const newTrade = {\n        ...tradeData,\n        userId: user.id,\n        createdAt: new Date(),\n        updatedAt: new Date()\n    };\n\n    await db.insert(trades).values(newTrade);\n\n    if (tagIds && tagIds.length > 0) {\n        for (const tagId of tagIds) {\n            await db.insert(tradeTags).values({\n                tradeId: newTrade.id,\n                tagId: tagId\n            });\n        }\n    }\n\n    revalidatePath(\"/trades\");\n    revalidatePath(\"/\");\n    revalidatePath(\"/reports\");\n    return { success: true };\n}\n\nexport async function updateTrade(id: string, data: Partial<CreateTradeInput>) {\n    const user = await getUser();\n    const db = getDb();\n\n    const { tags: tagIds, ...tradeData } = data;\n\n    if (Object.keys(tradeData).length > 0) {\n        await db.update(trades)\n            .set({ ...tradeData, updatedAt: new Date() })\n            .where(and(eq(trades.id, id), eq(trades.userId, user.id)));\n    }\n\n    if (tagIds !== undefined) {\n        // Replace tags\n        // 1. Delete existing for this trade\n        await db.delete(tradeTags).where(eq(tradeTags.tradeId, id));\n\n        // 2. Insert new\n        if (tagIds.length > 0) {\n            for (const tagId of tagIds) {\n                await db.insert(tradeTags).values({\n                    tradeId: id,\n                    tagId: tagId\n                });\n            }\n        }\n    }\n\n    revalidatePath(\"/trades\");\n    revalidatePath(`/trades/${id}`);\n    revalidatePath(\"/\");\n    revalidatePath(\"/reports\");\n    return { success: true };\n}\n\nexport async function deleteTrade(id: string) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.delete(trades)\n        .where(and(eq(trades.id, id), eq(trades.userId, user.id)));\n    // Cascade should handle tradeTags deletion or we can do manual if needed.\n    // Schema has onDelete: cascade, so it should be fine.\n\n    revalidatePath(\"/trades\");\n    revalidatePath(\"/\");\n    revalidatePath(\"/reports\");\n    return { success: true };\n}\n"],"names":[],"mappings":";;;;;;;IAwEsB,cAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 1175, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/app/actions/note-actions.ts"],"sourcesContent":["\"use server\";\n\nimport { auth } from \"@/lib/auth\";\nimport { headers } from \"next/headers\";\nimport { getDb } from \"@/lib/db\";\nimport { notes, sections, noteTags } from \"@/db/schema\";\nimport { eq, desc, and } from \"drizzle-orm\";\nimport { revalidatePath } from \"next/cache\";\n\nasync function getUser() {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n    if (!session?.user) throw new Error(\"Unauthorized\");\n    return session.user;\n}\n\nexport async function getNotes() {\n    const user = await getUser();\n    const db = getDb();\n\n    // Fetch notes descending by date\n    return await db.select()\n        .from(notes)\n        .where(eq(notes.userId, user.id))\n        .orderBy(desc(notes.date));\n}\n\nexport async function getSections() {\n    const user = await getUser();\n    const db = getDb();\n\n    // Fetch sections or return defaults if empty?\n    // User might need to init sections.\n    const userSections = await db.select().from(sections).where(eq(sections.userId, user.id));\n\n    if (userSections.length === 0) {\n        // Init default sections\n        const defaults = [\"Trade Notes\", \"Daily Journal\", \"Strategy\", \"Backtesting\"];\n        for (const name of defaults) {\n            await db.insert(sections).values({\n                id: `sec_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n                name,\n                userId: user.id\n            });\n        }\n        return await db.select().from(sections).where(eq(sections.userId, user.id));\n    }\n\n    return userSections;\n}\n\nexport async function createNote(data: Omit<typeof notes.$inferInsert, \"userId\">) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.insert(notes).values({\n        ...data,\n        userId: user.id\n    });\n\n    revalidatePath(\"/notebook\");\n    return { success: true };\n}\n\nexport async function updateNote(id: string, data: Partial<typeof notes.$inferInsert>) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.update(notes)\n        .set({ ...data, updatedAt: new Date() })\n        .where(and(eq(notes.id, id), eq(notes.userId, user.id)));\n\n    revalidatePath(\"/notebook\");\n    return { success: true };\n}\n\nexport async function deleteNote(id: string) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.delete(notes)\n        .where(and(eq(notes.id, id), eq(notes.userId, user.id)));\n\n    revalidatePath(\"/notebook\");\n    return { success: true };\n}\n"],"names":[],"mappings":";;;;;;;IAoDsB,aAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 1190, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/app/actions/note-actions.ts"],"sourcesContent":["\"use server\";\n\nimport { auth } from \"@/lib/auth\";\nimport { headers } from \"next/headers\";\nimport { getDb } from \"@/lib/db\";\nimport { notes, sections, noteTags } from \"@/db/schema\";\nimport { eq, desc, and } from \"drizzle-orm\";\nimport { revalidatePath } from \"next/cache\";\n\nasync function getUser() {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n    if (!session?.user) throw new Error(\"Unauthorized\");\n    return session.user;\n}\n\nexport async function getNotes() {\n    const user = await getUser();\n    const db = getDb();\n\n    // Fetch notes descending by date\n    return await db.select()\n        .from(notes)\n        .where(eq(notes.userId, user.id))\n        .orderBy(desc(notes.date));\n}\n\nexport async function getSections() {\n    const user = await getUser();\n    const db = getDb();\n\n    // Fetch sections or return defaults if empty?\n    // User might need to init sections.\n    const userSections = await db.select().from(sections).where(eq(sections.userId, user.id));\n\n    if (userSections.length === 0) {\n        // Init default sections\n        const defaults = [\"Trade Notes\", \"Daily Journal\", \"Strategy\", \"Backtesting\"];\n        for (const name of defaults) {\n            await db.insert(sections).values({\n                id: `sec_${Date.now()}_${Math.random().toString(36).substr(2, 9)}`,\n                name,\n                userId: user.id\n            });\n        }\n        return await db.select().from(sections).where(eq(sections.userId, user.id));\n    }\n\n    return userSections;\n}\n\nexport async function createNote(data: Omit<typeof notes.$inferInsert, \"userId\">) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.insert(notes).values({\n        ...data,\n        userId: user.id\n    });\n\n    revalidatePath(\"/notebook\");\n    return { success: true };\n}\n\nexport async function updateNote(id: string, data: Partial<typeof notes.$inferInsert>) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.update(notes)\n        .set({ ...data, updatedAt: new Date() })\n        .where(and(eq(notes.id, id), eq(notes.userId, user.id)));\n\n    revalidatePath(\"/notebook\");\n    return { success: true };\n}\n\nexport async function deleteNote(id: string) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.delete(notes)\n        .where(and(eq(notes.id, id), eq(notes.userId, user.id)));\n\n    revalidatePath(\"/notebook\");\n    return { success: true };\n}\n"],"names":[],"mappings":";;;;;;;IA4BsB,cAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 1205, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/components/AddTradeModal.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState } from \"react\";\nimport { X, Plus, Loader2 } from \"lucide-react\";\nimport { Modal } from \"@/components/ui/modal\";\nimport { useRouter } from \"next/navigation\";\nimport { createTrade } from \"@/app/actions/trade-actions\";\nimport { createNote, getSections } from \"@/app/actions/note-actions\";\n\n// Types matching DB schema roughly, or inferred\n// For form we can keep simple types\ninterface TradeData {\n    date: string;\n    ticker: string;\n    type: \"Long\" | \"Short\";\n    entryPrice: number;\n    exitPrice: number;\n    quantity: number;\n    pnl: number;\n    notes: string;\n}\n\nexport function AddTradeModal({ onTradeAdded }: { onTradeAdded?: () => void }) {\n    const [isOpen, setIsOpen] = useState(false);\n    const [isLoading, setIsLoading] = useState(false);\n    const router = useRouter();\n\n    // Form State\n    const [formData, setFormData] = useState<Partial<TradeData>>({\n        type: \"Long\"\n    });\n\n    const handleSubmit = async (e: React.FormEvent) => {\n        e.preventDefault();\n        setIsLoading(true);\n\n        try {\n            const tradeId = `trade_${Date.now()}`;\n            const date = formData.date || new Date().toISOString().split('T')[0];\n            const ticker = formData.ticker?.toUpperCase() || \"\";\n            const pnl = Number(formData.pnl) || 0;\n\n            const tradeData = {\n                id: tradeId,\n                date: date,\n                ticker: ticker,\n                type: formData.type as \"Long\" | \"Short\",\n                entryPrice: Number(formData.entryPrice) || 0,\n                exitPrice: Number(formData.exitPrice) || 0,\n                quantity: Number(formData.quantity) || 0,\n                pnl: pnl,\n                status: \"Closed\",\n                notes: formData.notes || \"\"\n            };\n\n            // 1. Save Trade to DB\n            await createTrade(tradeData);\n\n            // 2. Auto-create Note in Notebook\n            // Fetch sections to find \"Trade Notes\"\n            const sections = await getSections();\n            let tradeSection = sections.find((s: any) => s.name === \"Trade Notes\");\n            const sectionId = tradeSection ? tradeSection.id : (sections[0]?.id || \"s1\");\n\n            const newNote = {\n                id: `note_${Date.now()}`,\n                sectionId: sectionId,\n                title: `${ticker} ${tradeData.type} (${date})`,\n                content: `\\n# Trade Details\\n- **Ticker**: ${ticker}\\n- **Direction**: ${tradeData.type}\\n- **Date**: ${date}\\n- **Net P&L**: $${pnl.toFixed(2)}\\n\\n## Notes\\n${tradeData.notes || \"No initial notes.\"}\\n\\n## Review\\n`,\n                date: date,\n            };\n\n            await createNote(newNote);\n\n            // 3. Refresh UI\n            router.refresh();\n            if (onTradeAdded) onTradeAdded();\n            setIsOpen(false);\n            setFormData({ type: \"Long\" });\n\n        } catch (error) {\n            console.error(\"Failed to save trade:\", error);\n            alert(\"Failed to save trade. Please try again.\");\n        } finally {\n            setIsLoading(false);\n        }\n    };\n\n    return (\n        <>\n            <button\n                onClick={() => setIsOpen(true)}\n                className=\"bg-primary text-primary-foreground hover:bg-primary/90 px-4 py-2 rounded-md font-medium flex items-center shadow-lg shadow-primary/20 transition-all hover:scale-105\"\n            >\n                <Plus className=\"h-4 w-4 mr-2\" />\n                New Trade\n            </button>\n\n            <Modal isOpen={isOpen} onClose={() => setIsOpen(false)}>\n                <h2 className=\"text-xl font-bold mb-4\">Log New Trade</h2>\n                <form onSubmit={handleSubmit} className=\"space-y-4\">\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <div>\n                            <label className=\"text-xs font-medium text-muted-foreground mb-1 block\">Date</label>\n                            <input type=\"date\" required className=\"w-full bg-muted/50 border border-input rounded px-3 py-2 text-sm\"\n                                value={formData.date || \"\"}\n                                onChange={e => setFormData({ ...formData, date: e.target.value })}\n                            />\n                        </div>\n                        <div>\n                            <label className=\"text-xs font-medium text-muted-foreground mb-1 block\">Ticker</label>\n                            <input type=\"text\" placeholder=\"AAPL\" required className=\"w-full bg-muted/50 border border-input rounded px-3 py-2 text-sm uppercase\"\n                                value={formData.ticker || \"\"}\n                                onChange={e => setFormData({ ...formData, ticker: e.target.value })}\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <div>\n                            <label className=\"text-xs font-medium text-muted-foreground mb-1 block\">Direction</label>\n                            <div className=\"flex bg-muted/50 rounded p-1\">\n                                {[\"Long\", \"Short\"].map(type => (\n                                    <button\n                                        key={type}\n                                        type=\"button\"\n                                        onClick={() => setFormData({ ...formData, type: type as any })}\n                                        className={`flex-1 text-sm py-1 rounded transition-colors ${formData.type === type ? (type === 'Long' ? 'bg-green-500/20 text-green-500' : 'bg-red-500/20 text-red-500') : 'text-muted-foreground'}`}\n                                    >\n                                        {type}\n                                    </button>\n                                ))}\n                            </div>\n                        </div>\n                        <div>\n                            <label className=\"text-xs font-medium text-muted-foreground mb-1 block\">Quantity</label>\n                            <input type=\"number\" placeholder=\"0\" className=\"w-full bg-muted/50 border border-input rounded px-3 py-2 text-sm\"\n                                value={formData.quantity || \"\"}\n                                onChange={e => setFormData({ ...formData, quantity: Number(e.target.value) })}\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-4\">\n                        <div>\n                            <label className=\"text-xs font-medium text-muted-foreground mb-1 block\">Entry Price</label>\n                            <input type=\"number\" step=\"0.01\" placeholder=\"0.00\" required className=\"w-full bg-muted/50 border border-input rounded px-3 py-2 text-sm\"\n                                value={formData.entryPrice || \"\"}\n                                onChange={e => setFormData({ ...formData, entryPrice: Number(e.target.value) })}\n                            />\n                        </div>\n                        <div>\n                            <label className=\"text-xs font-medium text-muted-foreground mb-1 block\">Exit Price</label>\n                            <input type=\"number\" step=\"0.01\" placeholder=\"0.00\" required className=\"w-full bg-muted/50 border border-input rounded px-3 py-2 text-sm\"\n                                value={formData.exitPrice || \"\"}\n                                onChange={e => setFormData({ ...formData, exitPrice: Number(e.target.value) })}\n                            />\n                        </div>\n                    </div>\n\n                    <div>\n                        <label className=\"text-xs font-medium text-muted-foreground mb-1 block\">Net P&L ($)</label>\n                        <input type=\"number\" step=\"0.01\" placeholder=\"0.00\" required className=\"w-full bg-muted/50 border border-input rounded px-3 py-2 font-bold\"\n                            value={formData.pnl || \"\"}\n                            onChange={e => setFormData({ ...formData, pnl: Number(e.target.value) })}\n                        />\n                    </div>\n\n                    <button type=\"submit\" disabled={isLoading} className=\"w-full bg-primary text-primary-foreground hover:bg-primary/90 py-2 rounded-md font-medium flex justify-center items-center\">\n                        {isLoading ? <Loader2 className=\"animate-spin h-4 w-4\" /> : \"Save Trade\"}\n                    </button>\n                </form>\n            </Modal>\n        </>\n    );\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;;;AAPA;;;;;;;AAsBO,SAAS,cAAc,EAAE,YAAY,EAAiC;;IACzE,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,yKAAQ,EAAC;IACrC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,yKAAQ,EAAC;IAC3C,MAAM,SAAS,IAAA,kJAAS;IAExB,aAAa;IACb,MAAM,CAAC,UAAU,YAAY,GAAG,IAAA,yKAAQ,EAAqB;QACzD,MAAM;IACV;IAEA,MAAM,eAAe,OAAO;QACxB,EAAE,cAAc;QAChB,aAAa;QAEb,IAAI;YACA,MAAM,UAAU,CAAC,MAAM,EAAE,KAAK,GAAG,IAAI;YACrC,MAAM,OAAO,SAAS,IAAI,IAAI,IAAI,OAAO,WAAW,GAAG,KAAK,CAAC,IAAI,CAAC,EAAE;YACpE,MAAM,SAAS,SAAS,MAAM,EAAE,iBAAiB;YACjD,MAAM,MAAM,OAAO,SAAS,GAAG,KAAK;YAEpC,MAAM,YAAY;gBACd,IAAI;gBACJ,MAAM;gBACN,QAAQ;gBACR,MAAM,SAAS,IAAI;gBACnB,YAAY,OAAO,SAAS,UAAU,KAAK;gBAC3C,WAAW,OAAO,SAAS,SAAS,KAAK;gBACzC,UAAU,OAAO,SAAS,QAAQ,KAAK;gBACvC,KAAK;gBACL,QAAQ;gBACR,OAAO,SAAS,KAAK,IAAI;YAC7B;YAEA,sBAAsB;YACtB,MAAM,IAAA,wKAAW,EAAC;YAElB,kCAAkC;YAClC,uCAAuC;YACvC,MAAM,WAAW,MAAM,IAAA,wKAAW;YAClC,IAAI,eAAe,SAAS,IAAI,CAAC,CAAC,IAAW,EAAE,IAAI,KAAK;YACxD,MAAM,YAAY,eAAe,aAAa,EAAE,GAAI,QAAQ,CAAC,EAAE,EAAE,MAAM;YAEvE,MAAM,UAAU;gBACZ,IAAI,CAAC,KAAK,EAAE,KAAK,GAAG,IAAI;gBACxB,WAAW;gBACX,OAAO,GAAG,OAAO,CAAC,EAAE,UAAU,IAAI,CAAC,EAAE,EAAE,KAAK,CAAC,CAAC;gBAC9C,SAAS,CAAC,iCAAiC,EAAE,OAAO,mBAAmB,EAAE,UAAU,IAAI,CAAC,cAAc,EAAE,KAAK,kBAAkB,EAAE,IAAI,OAAO,CAAC,GAAG,cAAc,EAAE,UAAU,KAAK,IAAI,oBAAoB,eAAe,CAAC;gBACvN,MAAM;YACV;YAEA,MAAM,IAAA,uKAAU,EAAC;YAEjB,gBAAgB;YAChB,OAAO,OAAO;YACd,IAAI,cAAc;YAClB,UAAU;YACV,YAAY;gBAAE,MAAM;YAAO;QAE/B,EAAE,OAAO,OAAO;YACZ,QAAQ,KAAK,CAAC,yBAAyB;YACvC,MAAM;QACV,SAAU;YACN,aAAa;QACjB;IACJ;IAEA,qBACI;;0BACI,6LAAC;gBACG,SAAS,IAAM,UAAU;gBACzB,WAAU;;kCAEV,6LAAC,6MAAI;wBAAC,WAAU;;;;;;oBAAiB;;;;;;;0BAIrC,6LAAC,sIAAK;gBAAC,QAAQ;gBAAQ,SAAS,IAAM,UAAU;;kCAC5C,6LAAC;wBAAG,WAAU;kCAAyB;;;;;;kCACvC,6LAAC;wBAAK,UAAU;wBAAc,WAAU;;0CACpC,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;;0DACG,6LAAC;gDAAM,WAAU;0DAAuD;;;;;;0DACxE,6LAAC;gDAAM,MAAK;gDAAO,QAAQ;gDAAC,WAAU;gDAClC,OAAO,SAAS,IAAI,IAAI;gDACxB,UAAU,CAAA,IAAK,YAAY;wDAAE,GAAG,QAAQ;wDAAE,MAAM,EAAE,MAAM,CAAC,KAAK;oDAAC;;;;;;;;;;;;kDAGvE,6LAAC;;0DACG,6LAAC;gDAAM,WAAU;0DAAuD;;;;;;0DACxE,6LAAC;gDAAM,MAAK;gDAAO,aAAY;gDAAO,QAAQ;gDAAC,WAAU;gDACrD,OAAO,SAAS,MAAM,IAAI;gDAC1B,UAAU,CAAA,IAAK,YAAY;wDAAE,GAAG,QAAQ;wDAAE,QAAQ,EAAE,MAAM,CAAC,KAAK;oDAAC;;;;;;;;;;;;;;;;;;0CAK7E,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;;0DACG,6LAAC;gDAAM,WAAU;0DAAuD;;;;;;0DACxE,6LAAC;gDAAI,WAAU;0DACV;oDAAC;oDAAQ;iDAAQ,CAAC,GAAG,CAAC,CAAA,qBACnB,6LAAC;wDAEG,MAAK;wDACL,SAAS,IAAM,YAAY;gEAAE,GAAG,QAAQ;gEAAE,MAAM;4DAAY;wDAC5D,WAAW,CAAC,8CAA8C,EAAE,SAAS,IAAI,KAAK,OAAQ,SAAS,SAAS,mCAAmC,+BAAgC,yBAAyB;kEAEnM;uDALI;;;;;;;;;;;;;;;;kDAUrB,6LAAC;;0DACG,6LAAC;gDAAM,WAAU;0DAAuD;;;;;;0DACxE,6LAAC;gDAAM,MAAK;gDAAS,aAAY;gDAAI,WAAU;gDAC3C,OAAO,SAAS,QAAQ,IAAI;gDAC5B,UAAU,CAAA,IAAK,YAAY;wDAAE,GAAG,QAAQ;wDAAE,UAAU,OAAO,EAAE,MAAM,CAAC,KAAK;oDAAE;;;;;;;;;;;;;;;;;;0CAKvF,6LAAC;gCAAI,WAAU;;kDACX,6LAAC;;0DACG,6LAAC;gDAAM,WAAU;0DAAuD;;;;;;0DACxE,6LAAC;gDAAM,MAAK;gDAAS,MAAK;gDAAO,aAAY;gDAAO,QAAQ;gDAAC,WAAU;gDACnE,OAAO,SAAS,UAAU,IAAI;gDAC9B,UAAU,CAAA,IAAK,YAAY;wDAAE,GAAG,QAAQ;wDAAE,YAAY,OAAO,EAAE,MAAM,CAAC,KAAK;oDAAE;;;;;;;;;;;;kDAGrF,6LAAC;;0DACG,6LAAC;gDAAM,WAAU;0DAAuD;;;;;;0DACxE,6LAAC;gDAAM,MAAK;gDAAS,MAAK;gDAAO,aAAY;gDAAO,QAAQ;gDAAC,WAAU;gDACnE,OAAO,SAAS,SAAS,IAAI;gDAC7B,UAAU,CAAA,IAAK,YAAY;wDAAE,GAAG,QAAQ;wDAAE,WAAW,OAAO,EAAE,MAAM,CAAC,KAAK;oDAAE;;;;;;;;;;;;;;;;;;0CAKxF,6LAAC;;kDACG,6LAAC;wCAAM,WAAU;kDAAuD;;;;;;kDACxE,6LAAC;wCAAM,MAAK;wCAAS,MAAK;wCAAO,aAAY;wCAAO,QAAQ;wCAAC,WAAU;wCACnE,OAAO,SAAS,GAAG,IAAI;wCACvB,UAAU,CAAA,IAAK,YAAY;gDAAE,GAAG,QAAQ;gDAAE,KAAK,OAAO,EAAE,MAAM,CAAC,KAAK;4CAAE;;;;;;;;;;;;0CAI9E,6LAAC;gCAAO,MAAK;gCAAS,UAAU;gCAAW,WAAU;0CAChD,0BAAY,6LAAC,+NAAO;oCAAC,WAAU;;;;;2CAA4B;;;;;;;;;;;;;;;;;;;;AAMpF;GAzJgB;;QAGG,kJAAS;;;KAHZ"}},
    {"offset": {"line": 1620, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cn } from \"@/lib/utils\"\n\nexport interface ButtonProps extends React.ButtonHTMLAttributes<HTMLButtonElement> {\n    variant?: \"default\" | \"destructive\" | \"outline\" | \"secondary\" | \"ghost\" | \"link\"\n    size?: \"default\" | \"sm\" | \"lg\" | \"icon\"\n    asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n    ({ className, variant = \"default\", size = \"default\", asChild = false, ...props }, ref) => {\n        // Basic variant mappings since we don't have cva\n        const variants = {\n            default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n            destructive: \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n            outline: \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n            secondary: \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n            ghost: \"hover:bg-accent hover:text-accent-foreground\",\n            link: \"text-primary underline-offset-4 hover:underline\",\n        }\n\n        const sizes = {\n            default: \"h-10 px-4 py-2\",\n            sm: \"h-9 rounded-md px-3\",\n            lg: \"h-11 rounded-md px-8\",\n            icon: \"h-10 w-10\",\n        }\n\n        const baseStyles = \"inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\"\n\n        if (asChild) {\n            // If asChild is true, we should probably render a Slot, but we don't have it.\n            // Fallback to simple render or warn. \n            // For now, just render as button and ignore asChild if not installed.\n            console.warn(\"Button: asChild prop requires @radix-ui/react-slot which is not installed. Rendering as button.\")\n        }\n\n        return (\n            <button\n                className={cn(baseStyles, variants[variant], sizes[size], className)}\n                ref={ref}\n                {...props}\n            />\n        )\n    }\n)\nButton.displayName = \"Button\"\n\nexport { Button }\n"],"names":[],"mappings":";;;;;AAAA;AACA;;;;AAQA,MAAM,uBAAS,2KAAgB,MAC3B,CAAC,EAAE,SAAS,EAAE,UAAU,SAAS,EAAE,OAAO,SAAS,EAAE,UAAU,KAAK,EAAE,GAAG,OAAO,EAAE;IAC9E,iDAAiD;IACjD,MAAM,WAAW;QACb,SAAS;QACT,aAAa;QACb,SAAS;QACT,WAAW;QACX,OAAO;QACP,MAAM;IACV;IAEA,MAAM,QAAQ;QACV,SAAS;QACT,IAAI;QACJ,IAAI;QACJ,MAAM;IACV;IAEA,MAAM,aAAa;IAEnB,IAAI,SAAS;QACT,8EAA8E;QAC9E,sCAAsC;QACtC,sEAAsE;QACtE,QAAQ,IAAI,CAAC;IACjB;IAEA,qBACI,6LAAC;QACG,WAAW,IAAA,qHAAE,EAAC,YAAY,QAAQ,CAAC,QAAQ,EAAE,KAAK,CAAC,KAAK,EAAE;QAC1D,KAAK;QACJ,GAAG,KAAK;;;;;;AAGrB;;AAEJ,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 1676, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/app/actions/tag-actions.ts"],"sourcesContent":["\"use server\";\n\nimport { auth } from \"@/lib/auth\";\nimport { headers } from \"next/headers\";\nimport { getDb } from \"@/lib/db\";\nimport { categories, tags } from \"@/db/schema\";\nimport { eq, and } from \"drizzle-orm\";\nimport { revalidatePath } from \"next/cache\";\n\nasync function getUser() {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n    if (!session?.user) throw new Error(\"Unauthorized\");\n    return session.user;\n}\n\n// --- Categories ---\nexport async function getCategories() {\n    const user = await getUser();\n    const db = getDb();\n\n    // Fetch categories and their tags\n    // Drizzle doesn't do deep nesting automatically easily without `with` query which requires relations defined.\n    // For simplicity, we'll fetch both and assemble in JS, or use a join.\n    // Let's fetch all categories for user\n    const userCats = await db.select().from(categories).where(eq(categories.userId, user.id));\n    const userTags = await db.select().from(tags).where(eq(tags.userId, user.id));\n\n    // Assemble\n    return userCats.map(cat => ({\n        ...cat,\n        tags: userTags.filter(t => t.categoryId === cat.id)\n    }));\n}\n\nexport async function createCategory(data: Omit<typeof categories.$inferInsert, \"userId\">) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.insert(categories).values({\n        ...data,\n        userId: user.id\n    });\n\n    revalidatePath(\"/tags\");\n    revalidatePath(\"/reports\");\n    return { success: true };\n}\n\nexport async function deleteCategory(id: string) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.delete(categories).where(and(eq(categories.id, id), eq(categories.userId, user.id)));\n    revalidatePath(\"/tags\");\n    return { success: true };\n}\n\nexport async function updateCategory(id: string, data: Partial<typeof categories.$inferInsert>) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.update(categories)\n        .set({ ...data, updatedAt: new Date() })\n        .where(and(eq(categories.id, id), eq(categories.userId, user.id)));\n\n    // If color changed, update tags? The current logic does that in UI, \n    // but in DB we might want to cascade or keep them separate.\n    // The previous app logic updated all tags.\n    if (data.color) {\n        await db.update(tags)\n            .set({ color: data.color }) // We might need to adjust formatting if color logic changes\n            .where(and(eq(tags.categoryId, id), eq(tags.userId, user.id)));\n    }\n\n    revalidatePath(\"/tags\");\n    return { success: true };\n}\n\n// --- Tags ---\nexport async function createTag(data: Omit<typeof tags.$inferInsert, \"userId\">) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.insert(tags).values({\n        ...data,\n        userId: user.id\n    });\n\n    revalidatePath(\"/tags\");\n    return { success: true };\n}\n\nexport async function deleteTag(id: string) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.delete(tags).where(and(eq(tags.id, id), eq(tags.userId, user.id)));\n    revalidatePath(\"/tags\");\n    return { success: true };\n}\n"],"names":[],"mappings":";;;;;;;IAoCsB,iBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 1691, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/app/actions/tag-actions.ts"],"sourcesContent":["\"use server\";\n\nimport { auth } from \"@/lib/auth\";\nimport { headers } from \"next/headers\";\nimport { getDb } from \"@/lib/db\";\nimport { categories, tags } from \"@/db/schema\";\nimport { eq, and } from \"drizzle-orm\";\nimport { revalidatePath } from \"next/cache\";\n\nasync function getUser() {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n    if (!session?.user) throw new Error(\"Unauthorized\");\n    return session.user;\n}\n\n// --- Categories ---\nexport async function getCategories() {\n    const user = await getUser();\n    const db = getDb();\n\n    // Fetch categories and their tags\n    // Drizzle doesn't do deep nesting automatically easily without `with` query which requires relations defined.\n    // For simplicity, we'll fetch both and assemble in JS, or use a join.\n    // Let's fetch all categories for user\n    const userCats = await db.select().from(categories).where(eq(categories.userId, user.id));\n    const userTags = await db.select().from(tags).where(eq(tags.userId, user.id));\n\n    // Assemble\n    return userCats.map(cat => ({\n        ...cat,\n        tags: userTags.filter(t => t.categoryId === cat.id)\n    }));\n}\n\nexport async function createCategory(data: Omit<typeof categories.$inferInsert, \"userId\">) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.insert(categories).values({\n        ...data,\n        userId: user.id\n    });\n\n    revalidatePath(\"/tags\");\n    revalidatePath(\"/reports\");\n    return { success: true };\n}\n\nexport async function deleteCategory(id: string) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.delete(categories).where(and(eq(categories.id, id), eq(categories.userId, user.id)));\n    revalidatePath(\"/tags\");\n    return { success: true };\n}\n\nexport async function updateCategory(id: string, data: Partial<typeof categories.$inferInsert>) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.update(categories)\n        .set({ ...data, updatedAt: new Date() })\n        .where(and(eq(categories.id, id), eq(categories.userId, user.id)));\n\n    // If color changed, update tags? The current logic does that in UI, \n    // but in DB we might want to cascade or keep them separate.\n    // The previous app logic updated all tags.\n    if (data.color) {\n        await db.update(tags)\n            .set({ color: data.color }) // We might need to adjust formatting if color logic changes\n            .where(and(eq(tags.categoryId, id), eq(tags.userId, user.id)));\n    }\n\n    revalidatePath(\"/tags\");\n    return { success: true };\n}\n\n// --- Tags ---\nexport async function createTag(data: Omit<typeof tags.$inferInsert, \"userId\">) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.insert(tags).values({\n        ...data,\n        userId: user.id\n    });\n\n    revalidatePath(\"/tags\");\n    return { success: true };\n}\n\nexport async function deleteTag(id: string) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.delete(tags).where(and(eq(tags.id, id), eq(tags.userId, user.id)));\n    revalidatePath(\"/tags\");\n    return { success: true };\n}\n"],"names":[],"mappings":";;;;;;;IAiFsB,YAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 1706, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/app/actions/template-actions.ts"],"sourcesContent":["\"use server\";\n\nimport { auth } from \"@/lib/auth\";\nimport { headers } from \"next/headers\";\nimport { getDb } from \"@/lib/db\";\nimport { templates } from \"@/db/schema\";\nimport { eq, and } from \"drizzle-orm\";\nimport { revalidatePath } from \"next/cache\";\n\nasync function getUser() {\n    const session = await auth.api.getSession({\n        headers: await headers()\n    });\n    if (!session?.user) throw new Error(\"Unauthorized\");\n    return session.user;\n}\n\nexport async function getTemplates() {\n    const user = await getUser();\n    const db = getDb();\n\n    const userTemplates = await db.select().from(templates).where(eq(templates.userId, user.id));\n\n    if (userTemplates.length === 0) {\n        // Init defaults\n        const defaults = [\n            { name: \"Daily Plan\", content: \"\\n# Daily Plan\\n- [ ] Review Overnight Action\\n- [ ] Check Economic Calendar\\n- [ ] Key Levels to Watch:\\n  - ES: \\n  - NQ: \\n\" },\n            { name: \"Trade Review\", content: \"\\n# Trade Review\\n- Setup:\\n- Execution:\\n- Psychology:\\n- Outcome:\\n- Improvements:\\n\" },\n            { name: \"Weekly Review\", content: \"\\n# Weekly Review\\n- P&L: \\n- Best Trade:\\n- Worst Trade:\\n- Lessons Learned:\\n\" }\n        ];\n\n        for (const t of defaults) {\n            await db.insert(templates).values({\n                id: `tmpl_${Date.now()}_${Math.random().toString(36).substr(2, 5)}`,\n                userId: user.id,\n                name: t.name,\n                content: t.content\n            });\n        }\n        return await db.select().from(templates).where(eq(templates.userId, user.id));\n    }\n\n    return userTemplates;\n}\n\nexport async function createTemplate(data: Omit<typeof templates.$inferInsert, \"userId\">) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.insert(templates).values({\n        ...data,\n        userId: user.id\n    });\n    // No specific page to revalidate for templates unless we have a manager page. \n    // But Editor uses them. \n    return { success: true };\n}\n\nexport async function updateTemplate(id: string, data: Partial<typeof templates.$inferInsert>) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.update(templates)\n        .set({ ...data, updatedAt: new Date() })\n        .where(and(eq(templates.id, id), eq(templates.userId, user.id)));\n    return { success: true };\n}\n\nexport async function deleteTemplate(id: string) {\n    const user = await getUser();\n    const db = getDb();\n\n    await db.delete(templates).where(and(eq(templates.id, id), eq(templates.userId, user.id)));\n    return { success: true };\n}\n"],"names":[],"mappings":";;;;;;;IA6CsB,iBAAA,WAAA,GAAA,IAAA,kPAAA,EAAA,8CAAA,uOAAA,EAAA,KAAA,GAAA,6OAAA,EAAA"}},
    {"offset": {"line": 1721, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/components/MigrationComponent.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { Button } from \"@/components/ui/button\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Loader2, Database } from \"lucide-react\";\nimport { createCategory, createTag } from \"@/app/actions/tag-actions\";\nimport { createTrade } from \"@/app/actions/trade-actions\";\nimport { createNote } from \"@/app/actions/note-actions\";\nimport { createTemplate } from \"@/app/actions/template-actions\";\nimport { useRouter } from \"next/navigation\";\n\nexport function MigrationComponent() {\n    const [hasLocalData, setHasLocalData] = useState(false);\n    const [migrating, setMigrating] = useState(false);\n    const [progress, setProgress] = useState(\"\");\n    const router = useRouter();\n\n    useEffect(() => {\n        const trades = localStorage.getItem(\"trading_app_trades\");\n        const categories = localStorage.getItem(\"trading_app_categories\");\n        const notes = localStorage.getItem(\"trading_app_notes\");\n        if (trades || categories || notes) {\n            setHasLocalData(true);\n        }\n    }, []);\n\n    const handleMigrate = async () => {\n        if (!confirm(\"This will upload your local data to the cloud database. Continue?\")) return;\n        setMigrating(true);\n        setProgress(\"Starting migration...\");\n\n        try {\n            // 1. Categories & Tags\n            const categoriesStr = localStorage.getItem(\"trading_app_categories\");\n            if (categoriesStr) {\n                const categories = JSON.parse(categoriesStr);\n                for (const cat of categories) {\n                    setProgress(`Migrating Category: ${cat.name}`);\n                    await createCategory({\n                        id: cat.id,\n                        name: cat.name,\n                        color: cat.color\n                    });\n\n                    if (cat.tags) {\n                        for (const tag of cat.tags) {\n                            await createTag({\n                                id: tag.id,\n                                categoryId: cat.id,\n                                name: tag.name,\n                                color: tag.color\n                            });\n                        }\n                    }\n                }\n            }\n\n            // 2. Trades\n            const tradesStr = localStorage.getItem(\"trading_app_trades\");\n            if (tradesStr) {\n                const trades = JSON.parse(tradesStr);\n                let i = 0;\n                for (const trade of trades) {\n                    i++;\n                    setProgress(`Migrating Trade ${i}/${trades.length}`);\n                    // Ensure numeric fields are numbers\n                    await createTrade({\n                        // id: trade.id, // Let DB generate new ID or use existing? \n                        // Using existing ID is better for relations if we preserved them.\n                        // But my createTrade action generates new ID if not provided, or inserts provided?\n                        // Schema has string ID. I can pass it.\n                        // But wait, createTrade implementation in trade-actions.ts:\n                        // const newTrade = { ...data, userId, ... }; await db.insert(trades).values(newTrade);\n                        // If I pass ID in data, it works.\n                        id: trade.id,\n                        date: trade.date,\n                        ticker: trade.ticker,\n                        type: trade.type,\n                        entryPrice: Number(trade.entryPrice),\n                        exitPrice: Number(trade.exitPrice),\n                        quantity: Number(trade.quantity),\n                        pnl: Number(trade.pnl),\n                        status: trade.status || \"Closed\",\n                        notes: trade.notes,\n                        contracts: Number(trade.contracts || trade.quantity),\n                        points: Number(trade.points),\n                        ticks: Number(trade.ticks),\n                        rating: Number(trade.rating),\n                        profitTarget: Number(trade.profitTarget),\n                        stopLoss: Number(trade.stopLoss),\n                        plannedRR: Number(trade.plannedRR),\n                        realizedRR: Number(trade.realizedRR),\n                        tags: trade.tags // Array of tag IDs\n                    });\n                }\n            }\n\n            // 3. Notes & Sections\n            const sectionsStr = localStorage.getItem(\"trading_app_sections\");\n            // I didn't create createSection action yet? \n            // Note actions has createNote. Checks for sections automatically?\n            // \"getSections\" returns pre-defined sections or user sections.\n            // Note: Section management was minimal in local storage.\n            // If I want to migrate notes, I should check if sections exist.\n            // note-actions.ts `getSections` returns user sections. \n            // I should migrate sections if possible.\n            // app/actions/note-actions.ts `createNote` takes `sectionId`.\n            // I probably need `createSection` action if I want to preserve folder structure.\n            // If not, I can put them in default section.\n\n            // Let's Skip sections metadata explicitly and just create notes.\n            // But notes need sectionId.\n            const notesStr = localStorage.getItem(\"trading_app_notes\");\n            if (notesStr) {\n                const notes = JSON.parse(notesStr);\n                for (const note of notes) {\n                    setProgress(`Migrating Note: ${note.title}`);\n                    await createNote({\n                        id: note.id,\n                        title: note.title,\n                        content: note.content,\n                        date: note.date,\n                        sectionId: note.sectionId || \"s1\"\n                    });\n                }\n            }\n\n            // 4. Templates\n            const templatesStr = localStorage.getItem(\"trading_app_templates\");\n            if (templatesStr) {\n                const templates = JSON.parse(templatesStr);\n                for (const tmpl of templates) {\n                    setProgress(`Migrating Template: ${tmpl.name}`);\n                    await createTemplate({\n                        id: tmpl.id,\n                        name: tmpl.name,\n                        content: tmpl.content\n                    });\n                }\n            }\n\n            setProgress(\"Migration Complete!\");\n            alert(\"Migration Successful! You can now clear your local browser data if you wish.\");\n\n            // Optional: Clear local storage\n            // localStorage.clear(); \n            // setHasLocalData(false);\n\n            router.refresh();\n        } catch (error) {\n            console.error(error);\n            alert(\"Migration failed. Check console for details.\");\n        } finally {\n            setMigrating(false);\n        }\n    };\n\n    if (!hasLocalData) return null;\n\n    return (\n        <Card className=\"mb-6 border-blue-500/50 bg-blue-500/5\">\n            <CardContent className=\"flex items-center justify-between p-4\">\n                <div className=\"flex items-center space-x-4\">\n                    <Database className=\"h-6 w-6 text-blue-500\" />\n                    <div>\n                        <h3 className=\"font-semibold text-blue-500\">Local Data Detected</h3>\n                        <p className=\"text-sm text-muted-foreground\">Migrate your browser data to the cloud database.</p>\n                    </div>\n                </div>\n                <Button onClick={handleMigrate} disabled={migrating} variant=\"outline\" className=\"border-blue-500 text-blue-500 hover:bg-blue-500 hover:text-white\">\n                    {migrating ? <><Loader2 className=\"mr-2 h-4 w-4 animate-spin\" /> {progress}</> : \"Migrate to Cloud\"}\n                </Button>\n            </CardContent>\n        </Card>\n    );\n}\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 1982, "column": 0}, "map": {"version":3,"sources":["file:///Users/jacklau/Documents/GitHub/Trading-app/components/dashboard/DashboardClient.tsx"],"sourcesContent":["\"use client\";\n\nimport { useState, useEffect } from \"react\";\nimport { DollarSign, Percent, TrendingUp, Activity } from \"lucide-react\";\nimport { StatCard } from \"@/components/dashboard/StatCard\";\nimport { ProfitChart } from \"@/components/dashboard/ProfitChart\";\nimport { DailyProfitChart } from \"@/components/dashboard/DailyProfitChart\";\nimport { CalendarHeatmap } from \"@/components/dashboard/CalendarHeatmap\";\nimport { RecentTrades } from \"@/components/dashboard/RecentTrades\";\nimport { AddTradeModal } from \"@/components/AddTradeModal\";\nimport { MigrationComponent } from \"@/components/MigrationComponent\";\n\nexport default function DashboardClient({ initialTrades }: { initialTrades: any[] }) {\n    const [trades, setTrades] = useState(initialTrades);\n\n    useEffect(() => {\n        setTrades(initialTrades);\n    }, [initialTrades]);\n\n    const stats = calculateStats(trades);\n\n    function calculateStats(data: any[]) {\n        if (!data || data.length === 0) return {\n            netPnl: 0, winRate: 0, profitFactor: 0, avgWin: 0, avgLoss: 0, totalTrades: 0\n        };\n\n        let totalPnl = 0;\n        let wins = 0;\n        let grossProfit = 0;\n        let grossLoss = 0;\n        let winSum = 0;\n        let lossSum = 0;\n\n        data.forEach(t => {\n            totalPnl += t.pnl;\n            if (t.pnl > 0) {\n                wins++;\n                grossProfit += t.pnl;\n                winSum += t.pnl;\n            } else {\n                grossLoss += Math.abs(t.pnl);\n                lossSum += Math.abs(t.pnl);\n            }\n        });\n\n        const winRate = (wins / data.length) * 100;\n        const profitFactor = grossLoss === 0 ? grossProfit : grossProfit / grossLoss;\n        const avgWin = wins === 0 ? 0 : winSum / wins;\n        const avgLoss = (data.length - wins) === 0 ? 0 : lossSum / (data.length - wins);\n\n        return {\n            netPnl: totalPnl,\n            winRate,\n            profitFactor,\n            avgWin,\n            avgLoss,\n            totalTrades: data.length\n        };\n    }\n\n    return (\n        <div className=\"flex-1 space-y-4 p-8 pt-6\">\n            <div className=\"flex items-center justify-between space-y-2\">\n                <h2 className=\"text-3xl font-bold tracking-tight\">Dashboard</h2>\n                <div className=\"flex items-center space-x-2\">\n                    <AddTradeModal />\n                </div>\n            </div>\n\n            <MigrationComponent />\n\n            {/* Top Stats */}\n            <div className=\"grid gap-4 md:grid-cols-2 lg:grid-cols-5\">\n                <StatCard\n                    title=\"Net P&L\"\n                    value={`$${stats.netPnl.toFixed(2)}`}\n                    icon={DollarSign}\n                    trend={stats.totalTrades > 0 ? `${stats.totalTrades} trades total` : \"No trades yet\"}\n                    trendUp={stats.netPnl >= 0}\n                />\n                <StatCard\n                    title=\"Win Rate\"\n                    value={`${stats.winRate.toFixed(1)}%`}\n                    icon={Percent}\n                    trendUp={stats.winRate >= 50}\n                />\n                <StatCard\n                    title=\"Profit Factor\"\n                    value={stats.profitFactor.toFixed(2)}\n                    icon={TrendingUp}\n                    trendUp={stats.profitFactor >= 1.5}\n                />\n                <StatCard\n                    title=\"Avg Win / Loss\"\n                    value={`$${stats.avgWin.toFixed(0)} / $${stats.avgLoss.toFixed(0)}`}\n                    icon={Activity}\n                />\n                <StatCard\n                    title=\"Avg Daily\"\n                    value={`$${(stats.totalTrades > 0 ? stats.netPnl / stats.totalTrades : 0).toFixed(2)}`}\n                    icon={Activity}\n                />\n            </div>\n\n            {/* Main Content Area */}\n            <div className=\"grid gap-4 md:grid-cols-7\">\n\n                {/* Left Column: Charts */}\n                <div className=\"col-span-4 space-y-4\">\n                    <ProfitChart trades={trades} />\n                    <DailyProfitChart trades={trades} />\n                </div>\n\n                {/* Right Column: Calendar & Recent Activity */}\n                <div className=\"col-span-3 space-y-4\">\n                    <CalendarHeatmap trades={trades} />\n                    <RecentTrades trades={trades} />\n                </div>\n            </div>\n        </div>\n    );\n}\n"],"names":[],"mappings":"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"}}]
}