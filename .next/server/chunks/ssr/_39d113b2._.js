module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-xl border border-border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},5050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20611),g=a.r(1722),h=a.r(38783)},14548,a=>{"use strict";let b=(0,a.i(70106).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);a.s(["Save",()=>b],14548)},5549,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944);let e=(0,a.i(70106).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var f=a.i(14548),g=a.i(5050),h=(0,g.createServerReference)("60ebe67b8ff8ece876c43cb6478d274e72270a4de9",g.callServer,void 0,g.findSourceMapURL,"updateTrade"),i=a.i(3130);function j({trade:a,categories:g}){let j=(0,d.useRouter)(),[k,l]=(0,c.useState)(a),[m,n]=(0,c.useState)(!1),o=(0,c.useCallback)(a=>{let b=a.entryPrice??0,c=a.exitPrice??0,d=a.stopLoss??0,e=a.profitTarget??0,f=a.type,g={},h=!1;if(b&&c){let d=Number(("Long"===f?c-b:b-c).toFixed(2));a.points!==d&&(g.points=d,h=!0)}let i=0;if(b&&d&&(i=Math.abs(b-d)),i>0&&e){let c=Number((Math.abs(e-b)/i).toFixed(2));a.plannedRR!==c&&(g.plannedRR=c,h=!0)}if(i>0&&c){let d=Number((("Long"===f?c-b:b-c)/i).toFixed(2));a.realizedRR!==d&&(g.realizedRR=d,h=!0)}return h?g:null},[]);(0,c.useEffect)(()=>{if(!k)return;let a=o(k);a&&l(b=>({...b,...a}))},[k.entryPrice,k.exitPrice,k.stopLoss,k.profitTarget,k.type,o]);let p=async a=>{a.preventDefault(),n(!0);try{let{id:a,userId:b,createdAt:c,updatedAt:d,...e}=k;await h(k.id,e),j.push("/trades"),j.refresh()}catch(a){console.error("Failed to save:",a),n(!1)}};return(0,b.jsxs)("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,b.jsx)("button",{onClick:()=>j.back(),className:"p-2 hover:bg-muted rounded-full",children:(0,b.jsx)(e,{className:"h-5 w-5"})}),(0,b.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Edit Trade"})]}),(0,b.jsxs)("form",{onSubmit:p,className:"space-y-6",children:[(0,b.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Trade Details"})}),(0,b.jsxs)(i.CardContent,{className:"grid gap-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Date"}),(0,b.jsx)("input",{type:"date",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:k.date,onChange:a=>l({...k,date:a.target.value})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Ticker"}),(0,b.jsx)("input",{type:"text",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2 uppercase",value:k.ticker,onChange:a=>l({...k,ticker:a.target.value})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Direction"}),(0,b.jsxs)("select",{className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:k.type,onChange:a=>l({...k,type:a.target.value}),children:[(0,b.jsx)("option",{value:"Long",children:"Long"}),(0,b.jsx)("option",{value:"Short",children:"Short"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Quantity/Contracts"}),(0,b.jsx)("input",{type:"number",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:k.contracts||k.quantity,onChange:a=>l({...k,contracts:Number(a.target.value),quantity:Number(a.target.value)})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Entry Price"}),(0,b.jsx)("input",{type:"number",step:"0.01",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:k.entryPrice,onChange:a=>l({...k,entryPrice:Number(a.target.value)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Exit Price"}),(0,b.jsx)("input",{type:"number",step:"0.01",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:k.exitPrice,onChange:a=>l({...k,exitPrice:Number(a.target.value)})})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Net P&L ($)"}),(0,b.jsx)("input",{type:"number",step:"0.01",className:`w-full mt-1 bg-background border border-input rounded px-3 py-2 font-bold ${k.pnl>0?"text-green-500":"text-red-500"}`,value:k.pnl,onChange:a=>l({...k,pnl:Number(a.target.value)}),readOnly:!1})]})]})]}),(0,b.jsxs)(i.Card,{children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Metrics & Risk"})}),(0,b.jsxs)(i.CardContent,{className:"grid gap-4",children:[(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Profit Target"}),(0,b.jsx)("input",{type:"number",step:"0.01",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:k.profitTarget||"",onChange:a=>l({...k,profitTarget:Number(a.target.value)})})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Stop Loss"}),(0,b.jsx)("input",{type:"number",step:"0.01",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:k.stopLoss||"",onChange:a=>l({...k,stopLoss:Number(a.target.value)})})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Planned R:R (Auto)"}),(0,b.jsx)("input",{type:"number",step:"0.1",className:"w-full mt-1 bg-muted border border-input rounded px-3 py-2 text-muted-foreground",value:k.plannedRR||"",readOnly:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Realized R:R (Auto)"}),(0,b.jsx)("input",{type:"number",step:"0.1",className:`w-full mt-1 bg-muted border border-input rounded px-3 py-2 font-bold ${Number(k.realizedRR)>0?"text-green-500":"text-red-500"}`,value:k.realizedRR||"",readOnly:!0})]})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Points Captured (Auto)"}),(0,b.jsx)("input",{type:"number",step:"0.25",className:"w-full mt-1 bg-muted border border-input rounded px-3 py-2",value:k.points||"",readOnly:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"text-sm font-medium",children:"Rating (1-10)"}),(0,b.jsx)("input",{type:"number",min:"1",max:"10",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:k.rating||"",onChange:a=>l({...k,rating:Number(a.target.value)})})]})]})]})]}),(0,b.jsxs)(i.Card,{className:"md:col-span-2",children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Tags"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)("div",{className:"flex flex-wrap gap-4",children:g.map(a=>(0,b.jsxs)("div",{className:"border border-border p-3 rounded-lg",children:[(0,b.jsx)("h4",{className:"text-xs uppercase font-bold text-muted-foreground mb-2",children:a.name}),(0,b.jsx)("div",{className:"flex flex-wrap gap-2",children:a.tags.map(a=>(0,b.jsx)("button",{type:"button",onClick:()=>{var b;let c,d;return b=a.id,d=(c=k.tags||[]).includes(b)?c.filter(a=>a!==b):[...c,b],void l({...k,tags:d})},className:`text-xs px-2 py-1 rounded border transition-colors ${(k.tags||[]).includes(a.id)?"bg-primary text-primary-foreground border-primary":"bg-background border-border text-muted-foreground hover:border-primary/50"}`,children:a.name},a.id))})]},a.id))})})]}),(0,b.jsxs)(i.Card,{className:"md:col-span-2",children:[(0,b.jsx)(i.CardHeader,{children:(0,b.jsx)(i.CardTitle,{children:"Notes"})}),(0,b.jsx)(i.CardContent,{children:(0,b.jsx)("textarea",{className:"w-full min-h-[150px] bg-background border border-input rounded px-3 py-2 font-mono text-sm leading-relaxed focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"Trade execution notes...",value:k.notes||"",onChange:a=>l({...k,notes:a.target.value})})})]})]}),(0,b.jsx)("div",{className:"flex justify-end",children:(0,b.jsxs)("button",{type:"submit",disabled:m,className:"bg-primary text-primary-foreground hover:bg-primary/90 px-8 py-3 rounded-md font-medium text-lg flex items-center shadow-lg disabled:opacity-50",children:[(0,b.jsx)(f.Save,{className:"h-5 w-5 mr-2"}),m?"Saving...":"Save Changes"]})})]})]})}a.s(["TradeDetailClient",()=>j],5549)}];

//# sourceMappingURL=_39d113b2._.js.map