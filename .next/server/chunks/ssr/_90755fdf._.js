module.exports=[3130,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(97895);let e=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("rounded-xl border border-border bg-card text-card-foreground shadow-sm",a),...c}));e.displayName="Card";let f=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("flex flex-col space-y-1.5 p-6",a),...c}));f.displayName="CardHeader";let g=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("h3",{ref:e,className:(0,d.cn)("font-semibold leading-none tracking-tight",a),...c}));g.displayName="CardTitle";let h=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("p",{ref:e,className:(0,d.cn)("text-sm text-muted-foreground",a),...c}));h.displayName="CardDescription";let i=c.forwardRef(({className:a,...c},e)=>(0,b.jsx)("div",{ref:e,className:(0,d.cn)("p-6 pt-0",a),...c}));i.displayName="CardContent",a.s(["Card",()=>e,"CardContent",()=>i,"CardDescription",()=>h,"CardHeader",()=>f,"CardTitle",()=>g])},5050,(a,b,c)=>{"use strict";Object.defineProperty(c,"__esModule",{value:!0});var d={callServer:function(){return f.callServer},createServerReference:function(){return h.createServerReference},findSourceMapURL:function(){return g.findSourceMapURL}};for(var e in d)Object.defineProperty(c,e,{enumerable:!0,get:d[e]});let f=a.r(20611),g=a.r(1722),h=a.r(38783)},15618,33508,a=>{"use strict";var b=a.i(70106);let c=(0,b.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);a.s(["Plus",()=>c],15618);let d=(0,b.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);a.s(["X",()=>d],33508)},3635,76764,a=>{"use strict";var b=a.i(5050),c=(0,b.createServerReference)("40265b30102208e2dbfd12633e96636836ce67eda6",b.callServer,void 0,b.findSourceMapURL,"createCategory");a.s(["createCategory",()=>c],3635);var d=(0,b.createServerReference)("406890b07abd01545dd838dd5e595466dd49672ebd",b.callServer,void 0,b.findSourceMapURL,"createTag");a.s(["createTag",()=>d],76764)},53021,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(15618),e=a.i(33508),f=a.i(3130),g=a.i(50944),h=a.i(3635),i=a.i(5050),j=(0,i.createServerReference)("40a11be9358d3ebe9de33ae0c86d1ada70bf8b7562",i.callServer,void 0,i.findSourceMapURL,"deleteCategory"),k=(0,i.createServerReference)("6027cde55327f090e4abf24830ed1af39fdc545367",i.callServer,void 0,i.findSourceMapURL,"updateCategory"),l=a.i(76764),m=(0,i.createServerReference)("40483b3fa33e4e7224b9332c539e22dffe6158a91c",i.callServer,void 0,i.findSourceMapURL,"deleteTag");let n=[{name:"Blue",value:"blue",class:"text-blue-500 bg-blue-500/10",border:"border-blue-500/20"},{name:"Green",value:"green",class:"text-green-500 bg-green-500/10",border:"border-green-500/20"},{name:"Red",value:"red",class:"text-red-500 bg-red-500/10",border:"border-red-500/20"},{name:"Yellow",value:"yellow",class:"text-yellow-500 bg-yellow-500/10",border:"border-yellow-500/20"},{name:"Purple",value:"purple",class:"text-purple-500 bg-purple-500/10",border:"border-purple-500/20"},{name:"Orange",value:"orange",class:"text-orange-500 bg-orange-500/10",border:"border-orange-500/20"},{name:"Pink",value:"pink",class:"text-pink-500 bg-pink-500/10",border:"border-pink-500/20"},{name:"Gray",value:"gray",class:"text-gray-500 bg-gray-500/10",border:"border-gray-500/20"}];function o({initialCategories:a}){let[i,o]=(0,c.useState)(a),[p,q]=(0,c.useState)(""),[r,s]=(0,c.useState)("blue"),[t,u]=(0,c.useState)({}),[v,w]=(0,c.useState)(!1),x=(0,g.useRouter)();(0,c.useEffect)(()=>{o(a)},[a]);let y=async()=>{if(!p.trim())return;w(!0);let a=`cat_${Date.now()}`;o([...i,{id:a,name:p,color:r,tags:[]}]),q("");try{await (0,h.createCategory)({id:a,name:p,color:r}),x.refresh()}catch(a){console.error(a)}finally{w(!1)}},z=async a=>{if(confirm("Are you sure? This will delete all tags in this category.")){w(!0),o(i.filter(b=>b.id!==a));try{await j(a),x.refresh()}catch(a){console.error(a)}finally{w(!1)}}},A=async(a,b)=>{let c=i.find(b=>b.id===a);if(c&&c.color!==b){o(i.map(c=>c.id===a?{...c,color:b}:c));try{await k(a,{color:b}),x.refresh()}catch(a){console.error(a)}}},B=async a=>{let b=t[a];if(!b?.trim())return;w(!0);let c=`tag_${Date.now()}`,d=i.find(b=>b.id===a),e=n.find(a=>a.value===(d?.color||"blue"))||n[0];o(i.map(d=>d.id===a?{...d,tags:[...d.tags,{id:c,categoryId:a,name:b,color:e.class}]}:d)),u(b=>({...b,[a]:""}));try{await (0,l.createTag)({id:c,categoryId:a,name:b,color:e.class}),x.refresh()}catch(a){console.error(a)}finally{w(!1)}},C=async(a,b)=>{o(i.map(c=>c.id===a?{...c,tags:c.tags.filter(a=>a.id!==b)}:c));try{await m(b),x.refresh()}catch(a){console.error(a)}};return(0,b.jsxs)("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[(0,b.jsxs)("div",{className:"flex items-center justify-between",children:[(0,b.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Tag Management"}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 bg-muted/30 p-1 rounded-lg border border-border",children:[(0,b.jsx)("input",{type:"text",placeholder:"New Category Name",className:"bg-transparent border-none px-3 py-1.5 text-sm w-48 focus:outline-none",value:p,onChange:a=>q(a.target.value),onKeyDown:a=>"Enter"===a.key&&y()}),(0,b.jsx)("div",{className:"flex space-x-1 px-2 border-l border-border",children:n.slice(0,5).map(a=>(0,b.jsx)("button",{onClick:()=>s(a.value),className:`w-4 h-4 rounded-full transition-transform hover:scale-110 ${a.value===r?"ring-2 ring-primary ring-offset-1":""}`,style:{backgroundColor:"white"===a.value?"white":`var(--color-${a.value}-500, ${a.value})`},title:a.name},a.value))}),(0,b.jsx)("button",{onClick:y,disabled:v,className:"bg-primary text-primary-foreground hover:bg-primary/90 px-3 py-1.5 rounded-md text-xs font-medium ml-2 disabled:opacity-50",children:"Add"})]})]}),(0,b.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:i.map(a=>{let c=n.find(b=>b.value===a.color)||n[0];return(0,b.jsxs)(f.Card,{className:`relative group border-t-4 ${c?.border?c.border.replace("border-","border-t-"):""}`,style:{borderTopColor:"white"!==a.color?a.color:void 0},children:[(0,b.jsxs)(f.CardHeader,{className:"pb-3 flex flex-row items-center justify-between space-y-0",children:[(0,b.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,b.jsx)(f.CardTitle,{children:a.name}),(0,b.jsx)("div",{className:"flex space-x-1",children:n.map(c=>(0,b.jsx)("button",{onClick:()=>A(a.id,c.value),className:`w-3 h-3 rounded-full transition-transform hover:scale-125 ${a.color===c.value?"ring-2 ring-offset-1 ring-primary":""}`,style:{backgroundColor:"white"===c.value?"#e2e8f0":`var(--color-${c.value}-500, ${c.value})`},title:`Set color to ${c.name}`},c.value))})]}),(0,b.jsx)("button",{onClick:()=>z(a.id),className:"text-muted-foreground hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity",children:(0,b.jsx)(e.X,{className:"h-4 w-4"})})]}),(0,b.jsxs)(f.CardContent,{children:[(0,b.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[a.tags.map(d=>(0,b.jsxs)("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-md text-xs font-medium ${d.color||c.class}`,children:[(0,b.jsx)("span",{children:d.name}),(0,b.jsx)("button",{onClick:()=>C(a.id,d.id),className:"hover:text-foreground/70 ml-1",children:(0,b.jsx)(e.X,{className:"h-3 w-3"})})]},d.id)),0===a.tags.length&&(0,b.jsx)("span",{className:"text-xs text-muted-foreground italic",children:"No tags yet"})]}),(0,b.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,b.jsx)("input",{type:"text",placeholder:"Add tag...",className:"flex-1 bg-muted/50 border-none text-xs px-2 py-1.5 rounded focus:outline-none focus:ring-1 focus:ring-primary",value:t[a.id]||"",onChange:b=>u(c=>({...c,[a.id]:b.target.value})),onKeyDown:b=>"Enter"===b.key&&B(a.id)}),(0,b.jsx)("button",{onClick:()=>B(a.id),className:"p-1.5 hover:bg-muted rounded text-primary",children:(0,b.jsx)(d.Plus,{className:"h-3 w-3"})})]})]})]},a.id)})})]})}a.s(["default",()=>o],53021)}];

//# sourceMappingURL=_90755fdf._.js.map