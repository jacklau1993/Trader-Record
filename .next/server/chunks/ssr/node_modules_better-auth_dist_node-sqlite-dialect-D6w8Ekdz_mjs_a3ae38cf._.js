module.exports=[35607,a=>{"use strict";var b=a.i(4781),c=a.i(54132),d=a.i(76452),e=a.i(19560),f=class{get supportsCreateIfNotExists(){return!0}get supportsTransactionalDdl(){return!1}get supportsReturning(){return!0}async acquireMigrationLock(){}async releaseMigrationLock(){}get supportsOutput(){return!0}},g=class{#a;#b=new i;#c;#d;constructor(a){this.#a={...a}}async init(){this.#c=this.#a.database,this.#d=new h(this.#c),this.#a.onCreateConnection&&await this.#a.onCreateConnection(this.#d)}async acquireConnection(){return await this.#b.lock(),this.#d}async beginTransaction(a){await a.executeQuery(b.CompiledQuery.raw("begin"))}async commitTransaction(a){await a.executeQuery(b.CompiledQuery.raw("commit"))}async rollbackTransaction(a){await a.executeQuery(b.CompiledQuery.raw("rollback"))}async releaseConnection(){this.#b.unlock()}async destroy(){this.#c?.close()}},h=class{#c;constructor(a){this.#c=a}executeQuery(a){let{sql:b,parameters:c}=a;return Promise.resolve({rows:this.#c.prepare(b).all(...c)})}async *streamQuery(){throw Error("Streaming query is not supported by SQLite driver.")}},i=class{#e;#f;async lock(){for(;this.#e;)await this.#e;this.#e=new Promise(a=>{this.#f=a})}unlock(){let a=this.#f;this.#e=void 0,this.#f=void 0,a?.()}},j=class{#c;constructor(a){this.#c=a}async getSchemas(){return[]}async getTables(a={withInternalKyselyTables:!1}){let b=this.#c.selectFrom("sqlite_schema").where("type","=","table").where("name","not like","sqlite_%").select("name").$castTo();return a.withInternalKyselyTables||(b=b.where("name","!=",c.DEFAULT_MIGRATION_TABLE).where("name","!=",c.DEFAULT_MIGRATION_LOCK_TABLE)),Promise.all((await b.execute()).map(({name:a})=>this.#g(a)))}async getMetadata(a){return{tables:await this.getTables(a)}}async #g(a){let b=this.#c,c=(await b.selectFrom("sqlite_master").where("name","=",a).select("sql").$castTo().execute())[0]?.sql?.split(/[\(\),]/)?.find(a=>a.toLowerCase().includes("autoincrement"))?.split(/\s+/)?.[0]?.replace(/["`]/g,"");return{name:a,columns:(await b.selectFrom(e.sql`pragma_table_info(${a})`.as("table_info")).select(["name","type","notnull","dflt_value"]).execute()).map(a=>({name:a.name,dataType:a.type,isNullable:!a.notnull,isAutoIncrementing:a.name===c,hasDefaultValue:null!=a.dflt_value})),isView:!0}}},k=class extends d.DefaultQueryCompiler{getCurrentParameterPlaceholder(){return"?"}getLeftIdentifierWrapper(){return'"'}getRightIdentifierWrapper(){return'"'}getAutoIncrement(){return"autoincrement"}},l=class{#a;constructor(a){this.#a={...a}}createDriver(){return new g(this.#a)}createQueryCompiler(){return new k}createAdapter(){return new f}createIntrospector(a){return new j(a)}};a.s(["NodeSqliteDialect",()=>l])}];

//# sourceMappingURL=node_modules_better-auth_dist_node-sqlite-dialect-D6w8Ekdz_mjs_a3ae38cf._.js.map