(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var r=e.i(43476),a=e.i(71645),t=e.i(47163);let l=a.forwardRef(({className:e,...a},l)=>(0,r.jsx)("div",{ref:l,className:(0,t.cn)("rounded-xl border border-border bg-card text-card-foreground shadow-sm",e),...a}));l.displayName="Card";let s=a.forwardRef(({className:e,...a},l)=>(0,r.jsx)("div",{ref:l,className:(0,t.cn)("flex flex-col space-y-1.5 p-6",e),...a}));s.displayName="CardHeader";let o=a.forwardRef(({className:e,...a},l)=>(0,r.jsx)("h3",{ref:l,className:(0,t.cn)("font-semibold leading-none tracking-tight",e),...a}));o.displayName="CardTitle";let d=a.forwardRef(({className:e,...a},l)=>(0,r.jsx)("p",{ref:l,className:(0,t.cn)("text-sm text-muted-foreground",e),...a}));d.displayName="CardDescription";let n=a.forwardRef(({className:e,...a},l)=>(0,r.jsx)("div",{ref:l,className:(0,t.cn)("p-6 pt-0",e),...a}));n.displayName="CardContent",e.s(["Card",()=>l,"CardContent",()=>n,"CardDescription",()=>d,"CardHeader",()=>s,"CardTitle",()=>o])},95187,(e,r,a)=>{"use strict";Object.defineProperty(a,"__esModule",{value:!0});var t={callServer:function(){return s.callServer},createServerReference:function(){return d.createServerReference},findSourceMapURL:function(){return o.findSourceMapURL}};for(var l in t)Object.defineProperty(a,l,{enumerable:!0,get:t[l]});let s=e.r(32120),o=e.r(92245),d=e.r(35326)},7233,37727,e=>{"use strict";var r=e.i(75254);let a=(0,r.default)("plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);e.s(["Plus",()=>a],7233);let t=(0,r.default)("x",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);e.s(["X",()=>t],37727)},65893,51312,e=>{"use strict";var r=e.i(95187),a=(0,r.createServerReference)("40265b30102208e2dbfd12633e96636836ce67eda6",r.callServer,void 0,r.findSourceMapURL,"createCategory");e.s(["createCategory",()=>a],65893);var t=(0,r.createServerReference)("406890b07abd01545dd838dd5e595466dd49672ebd",r.callServer,void 0,r.findSourceMapURL,"createTag");e.s(["createTag",()=>t],51312)},92589,e=>{"use strict";var r=e.i(43476),a=e.i(71645),t=e.i(7233),l=e.i(37727),s=e.i(70065),o=e.i(18566),d=e.i(65893),n=e.i(95187),c=(0,n.createServerReference)("40a11be9358d3ebe9de33ae0c86d1ada70bf8b7562",n.callServer,void 0,n.findSourceMapURL,"deleteCategory"),i=(0,n.createServerReference)("6027cde55327f090e4abf24830ed1af39fdc545367",n.callServer,void 0,n.findSourceMapURL,"updateCategory"),u=e.i(51312),f=(0,n.createServerReference)("40483b3fa33e4e7224b9332c539e22dffe6158a91c",n.callServer,void 0,n.findSourceMapURL,"deleteTag");let m=[{name:"Blue",value:"blue",class:"text-blue-500 bg-blue-500/10",border:"border-blue-500/20"},{name:"Green",value:"green",class:"text-green-500 bg-green-500/10",border:"border-green-500/20"},{name:"Red",value:"red",class:"text-red-500 bg-red-500/10",border:"border-red-500/20"},{name:"Yellow",value:"yellow",class:"text-yellow-500 bg-yellow-500/10",border:"border-yellow-500/20"},{name:"Purple",value:"purple",class:"text-purple-500 bg-purple-500/10",border:"border-purple-500/20"},{name:"Orange",value:"orange",class:"text-orange-500 bg-orange-500/10",border:"border-orange-500/20"},{name:"Pink",value:"pink",class:"text-pink-500 bg-pink-500/10",border:"border-pink-500/20"},{name:"Gray",value:"gray",class:"text-gray-500 bg-gray-500/10",border:"border-gray-500/20"}];function p({initialCategories:e}){let[n,p]=(0,a.useState)(e),[g,x]=(0,a.useState)(""),[b,v]=(0,a.useState)("blue"),[y,h]=(0,a.useState)({}),[j,N]=(0,a.useState)(!1),w=(0,o.useRouter)();(0,a.useEffect)(()=>{p(e)},[e]);let C=async()=>{if(!g.trim())return;N(!0);let e=`cat_${Date.now()}`;p([...n,{id:e,name:g,color:b,tags:[]}]),x("");try{await (0,d.createCategory)({id:e,name:g,color:b}),w.refresh()}catch(e){console.error(e)}finally{N(!1)}},S=async e=>{if(confirm("Are you sure? This will delete all tags in this category.")){N(!0),p(n.filter(r=>r.id!==e));try{await c(e),w.refresh()}catch(e){console.error(e)}finally{N(!1)}}},R=async(e,r)=>{let a=n.find(r=>r.id===e);if(a&&a.color!==r){p(n.map(a=>a.id===e?{...a,color:r}:a));try{await i(e,{color:r}),w.refresh()}catch(e){console.error(e)}}},k=async e=>{let r=y[e];if(!r?.trim())return;N(!0);let a=`tag_${Date.now()}`,t=n.find(r=>r.id===e),l=m.find(e=>e.value===(t?.color||"blue"))||m[0];p(n.map(t=>t.id===e?{...t,tags:[...t.tags,{id:a,categoryId:e,name:r,color:l.class}]}:t)),h(r=>({...r,[e]:""}));try{await (0,u.createTag)({id:a,categoryId:e,name:r,color:l.class}),w.refresh()}catch(e){console.error(e)}finally{N(!1)}},T=async(e,r)=>{p(n.map(a=>a.id===e?{...a,tags:a.tags.filter(e=>e.id!==r)}:a));try{await f(r),w.refresh()}catch(e){console.error(e)}};return(0,r.jsxs)("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[(0,r.jsxs)("div",{className:"flex items-center justify-between",children:[(0,r.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Tag Management"}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 bg-muted/30 p-1 rounded-lg border border-border",children:[(0,r.jsx)("input",{type:"text",placeholder:"New Category Name",className:"bg-transparent border-none px-3 py-1.5 text-sm w-48 focus:outline-none",value:g,onChange:e=>x(e.target.value),onKeyDown:e=>"Enter"===e.key&&C()}),(0,r.jsx)("div",{className:"flex space-x-1 px-2 border-l border-border",children:m.slice(0,5).map(e=>(0,r.jsx)("button",{onClick:()=>v(e.value),className:`w-4 h-4 rounded-full transition-transform hover:scale-110 ${e.value===b?"ring-2 ring-primary ring-offset-1":""}`,style:{backgroundColor:"white"===e.value?"white":`var(--color-${e.value}-500, ${e.value})`},title:e.name},e.value))}),(0,r.jsx)("button",{onClick:C,disabled:j,className:"bg-primary text-primary-foreground hover:bg-primary/90 px-3 py-1.5 rounded-md text-xs font-medium ml-2 disabled:opacity-50",children:"Add"})]})]}),(0,r.jsx)("div",{className:"grid gap-4 md:grid-cols-2 lg:grid-cols-3",children:n.map(e=>{let a=m.find(r=>r.value===e.color)||m[0];return(0,r.jsxs)(s.Card,{className:`relative group border-t-4 ${a?.border?a.border.replace("border-","border-t-"):""}`,style:{borderTopColor:"white"!==e.color?e.color:void 0},children:[(0,r.jsxs)(s.CardHeader,{className:"pb-3 flex flex-row items-center justify-between space-y-0",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,r.jsx)(s.CardTitle,{children:e.name}),(0,r.jsx)("div",{className:"flex space-x-1",children:m.map(a=>(0,r.jsx)("button",{onClick:()=>R(e.id,a.value),className:`w-3 h-3 rounded-full transition-transform hover:scale-125 ${e.color===a.value?"ring-2 ring-offset-1 ring-primary":""}`,style:{backgroundColor:"white"===a.value?"#e2e8f0":`var(--color-${a.value}-500, ${a.value})`},title:`Set color to ${a.name}`},a.value))})]}),(0,r.jsx)("button",{onClick:()=>S(e.id),className:"text-muted-foreground hover:text-destructive opacity-0 group-hover:opacity-100 transition-opacity",children:(0,r.jsx)(l.X,{className:"h-4 w-4"})})]}),(0,r.jsxs)(s.CardContent,{children:[(0,r.jsxs)("div",{className:"flex flex-wrap gap-2 mb-4",children:[e.tags.map(t=>(0,r.jsxs)("div",{className:`flex items-center space-x-1 px-2 py-1 rounded-md text-xs font-medium ${t.color||a.class}`,children:[(0,r.jsx)("span",{children:t.name}),(0,r.jsx)("button",{onClick:()=>T(e.id,t.id),className:"hover:text-foreground/70 ml-1",children:(0,r.jsx)(l.X,{className:"h-3 w-3"})})]},t.id)),0===e.tags.length&&(0,r.jsx)("span",{className:"text-xs text-muted-foreground italic",children:"No tags yet"})]}),(0,r.jsxs)("div",{className:"flex items-center space-x-2 mt-2",children:[(0,r.jsx)("input",{type:"text",placeholder:"Add tag...",className:"flex-1 bg-muted/50 border-none text-xs px-2 py-1.5 rounded focus:outline-none focus:ring-1 focus:ring-primary",value:y[e.id]||"",onChange:r=>h(a=>({...a,[e.id]:r.target.value})),onKeyDown:r=>"Enter"===r.key&&k(e.id)}),(0,r.jsx)("button",{onClick:()=>k(e.id),className:"p-1.5 hover:bg-muted rounded text-primary",children:(0,r.jsx)(t.Plus,{className:"h-3 w-3"})})]})]})]},e.id)})})]})}e.s(["default",()=>p],92589)}]);