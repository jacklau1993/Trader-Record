(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,70065,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(47163);let s=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("rounded-xl border border-border bg-card text-card-foreground shadow-sm",e),...t}));s.displayName="Card";let d=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("flex flex-col space-y-1.5 p-6",e),...t}));d.displayName="CardHeader";let l=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("h3",{ref:s,className:(0,a.cn)("font-semibold leading-none tracking-tight",e),...t}));l.displayName="CardTitle";let n=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("p",{ref:s,className:(0,a.cn)("text-sm text-muted-foreground",e),...t}));n.displayName="CardDescription";let i=t.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{ref:s,className:(0,a.cn)("p-6 pt-0",e),...t}));i.displayName="CardContent",e.s(["Card",()=>s,"CardContent",()=>i,"CardDescription",()=>n,"CardHeader",()=>d,"CardTitle",()=>l])},95187,(e,r,t)=>{"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a={callServer:function(){return d.callServer},createServerReference:function(){return n.createServerReference},findSourceMapURL:function(){return l.findSourceMapURL}};for(var s in a)Object.defineProperty(t,s,{enumerable:!0,get:a[s]});let d=e.r(32120),l=e.r(92245),n=e.r(35326)},56909,e=>{"use strict";let r=(0,e.i(75254).default)("save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);e.s(["Save",()=>r],56909)},23980,e=>{"use strict";var r=e.i(43476),t=e.i(71645),a=e.i(18566);let s=(0,e.i(75254).default)("arrow-left",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);var d=e.i(56909),l=e.i(95187),n=(0,l.createServerReference)("60ebe67b8ff8ece876c43cb6478d274e72270a4de9",l.callServer,void 0,l.findSourceMapURL,"updateTrade"),i=e.i(70065);function o({trade:e,categories:l}){let o=(0,a.useRouter)(),[c,u]=(0,t.useState)(e),[m,p]=(0,t.useState)(!1),x=(0,t.useCallback)(e=>{let r=e.entryPrice??0,t=e.exitPrice??0,a=e.stopLoss??0,s=e.profitTarget??0,d=e.type,l={},n=!1;if(r&&t){let a=Number(("Long"===d?t-r:r-t).toFixed(2));e.points!==a&&(l.points=a,n=!0)}let i=0;if(r&&a&&(i=Math.abs(r-a)),i>0&&s){let t=Number((Math.abs(s-r)/i).toFixed(2));e.plannedRR!==t&&(l.plannedRR=t,n=!0)}if(i>0&&t){let a=Number((("Long"===d?t-r:r-t)/i).toFixed(2));e.realizedRR!==a&&(l.realizedRR=a,n=!0)}return n?l:null},[]);(0,t.useEffect)(()=>{if(!c)return;let e=x(c);e&&u(r=>({...r,...e}))},[c.entryPrice,c.exitPrice,c.stopLoss,c.profitTarget,c.type,x]);let b=async e=>{e.preventDefault(),p(!0);try{let{id:e,userId:r,createdAt:t,updatedAt:a,...s}=c;await n(c.id,s),o.push("/trades"),o.refresh()}catch(e){console.error("Failed to save:",e),p(!1)}};return(0,r.jsxs)("div",{className:"flex-1 space-y-4 p-8 pt-6",children:[(0,r.jsxs)("div",{className:"flex items-center space-x-4 mb-6",children:[(0,r.jsx)("button",{onClick:()=>o.back(),className:"p-2 hover:bg-muted rounded-full",children:(0,r.jsx)(s,{className:"h-5 w-5"})}),(0,r.jsx)("h2",{className:"text-3xl font-bold tracking-tight",children:"Edit Trade"})]}),(0,r.jsxs)("form",{onSubmit:b,className:"space-y-6",children:[(0,r.jsxs)("div",{className:"grid gap-6 md:grid-cols-2",children:[(0,r.jsxs)(i.Card,{children:[(0,r.jsx)(i.CardHeader,{children:(0,r.jsx)(i.CardTitle,{children:"Trade Details"})}),(0,r.jsxs)(i.CardContent,{className:"grid gap-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Date"}),(0,r.jsx)("input",{type:"date",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:c.date,onChange:e=>u({...c,date:e.target.value})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Ticker"}),(0,r.jsx)("input",{type:"text",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2 uppercase",value:c.ticker,onChange:e=>u({...c,ticker:e.target.value})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Direction"}),(0,r.jsxs)("select",{className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:c.type,onChange:e=>u({...c,type:e.target.value}),children:[(0,r.jsx)("option",{value:"Long",children:"Long"}),(0,r.jsx)("option",{value:"Short",children:"Short"})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Quantity/Contracts"}),(0,r.jsx)("input",{type:"number",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:c.contracts||c.quantity,onChange:e=>u({...c,contracts:Number(e.target.value),quantity:Number(e.target.value)})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Entry Price"}),(0,r.jsx)("input",{type:"number",step:"0.01",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:c.entryPrice,onChange:e=>u({...c,entryPrice:Number(e.target.value)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Exit Price"}),(0,r.jsx)("input",{type:"number",step:"0.01",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:c.exitPrice,onChange:e=>u({...c,exitPrice:Number(e.target.value)})})]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Net P&L ($)"}),(0,r.jsx)("input",{type:"number",step:"0.01",className:`w-full mt-1 bg-background border border-input rounded px-3 py-2 font-bold ${c.pnl>0?"text-green-500":"text-red-500"}`,value:c.pnl,onChange:e=>u({...c,pnl:Number(e.target.value)}),readOnly:!1})]})]})]}),(0,r.jsxs)(i.Card,{children:[(0,r.jsx)(i.CardHeader,{children:(0,r.jsx)(i.CardTitle,{children:"Metrics & Risk"})}),(0,r.jsxs)(i.CardContent,{className:"grid gap-4",children:[(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Profit Target"}),(0,r.jsx)("input",{type:"number",step:"0.01",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:c.profitTarget||"",onChange:e=>u({...c,profitTarget:Number(e.target.value)})})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Stop Loss"}),(0,r.jsx)("input",{type:"number",step:"0.01",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:c.stopLoss||"",onChange:e=>u({...c,stopLoss:Number(e.target.value)})})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Planned R:R (Auto)"}),(0,r.jsx)("input",{type:"number",step:"0.1",className:"w-full mt-1 bg-muted border border-input rounded px-3 py-2 text-muted-foreground",value:c.plannedRR||"",readOnly:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Realized R:R (Auto)"}),(0,r.jsx)("input",{type:"number",step:"0.1",className:`w-full mt-1 bg-muted border border-input rounded px-3 py-2 font-bold ${Number(c.realizedRR)>0?"text-green-500":"text-red-500"}`,value:c.realizedRR||"",readOnly:!0})]})]}),(0,r.jsxs)("div",{className:"grid grid-cols-2 gap-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium text-muted-foreground",children:"Points Captured (Auto)"}),(0,r.jsx)("input",{type:"number",step:"0.25",className:"w-full mt-1 bg-muted border border-input rounded px-3 py-2",value:c.points||"",readOnly:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"text-sm font-medium",children:"Rating (1-10)"}),(0,r.jsx)("input",{type:"number",min:"1",max:"10",className:"w-full mt-1 bg-background border border-input rounded px-3 py-2",value:c.rating||"",onChange:e=>u({...c,rating:Number(e.target.value)})})]})]})]})]}),(0,r.jsxs)(i.Card,{className:"md:col-span-2",children:[(0,r.jsx)(i.CardHeader,{children:(0,r.jsx)(i.CardTitle,{children:"Tags"})}),(0,r.jsx)(i.CardContent,{children:(0,r.jsx)("div",{className:"flex flex-wrap gap-4",children:l.map(e=>(0,r.jsxs)("div",{className:"border border-border p-3 rounded-lg",children:[(0,r.jsx)("h4",{className:"text-xs uppercase font-bold text-muted-foreground mb-2",children:e.name}),(0,r.jsx)("div",{className:"flex flex-wrap gap-2",children:e.tags.map(e=>(0,r.jsx)("button",{type:"button",onClick:()=>{var r;let t,a;return r=e.id,a=(t=c.tags||[]).includes(r)?t.filter(e=>e!==r):[...t,r],void u({...c,tags:a})},className:`text-xs px-2 py-1 rounded border transition-colors ${(c.tags||[]).includes(e.id)?"bg-primary text-primary-foreground border-primary":"bg-background border-border text-muted-foreground hover:border-primary/50"}`,children:e.name},e.id))})]},e.id))})})]}),(0,r.jsxs)(i.Card,{className:"md:col-span-2",children:[(0,r.jsx)(i.CardHeader,{children:(0,r.jsx)(i.CardTitle,{children:"Notes"})}),(0,r.jsx)(i.CardContent,{children:(0,r.jsx)("textarea",{className:"w-full min-h-[150px] bg-background border border-input rounded px-3 py-2 font-mono text-sm leading-relaxed focus:outline-none focus:ring-1 focus:ring-primary",placeholder:"Trade execution notes...",value:c.notes||"",onChange:e=>u({...c,notes:e.target.value})})})]})]}),(0,r.jsx)("div",{className:"flex justify-end",children:(0,r.jsxs)("button",{type:"submit",disabled:m,className:"bg-primary text-primary-foreground hover:bg-primary/90 px-8 py-3 rounded-md font-medium text-lg flex items-center shadow-lg disabled:opacity-50",children:[(0,r.jsx)(d.Save,{className:"h-5 w-5 mr-2"}),m?"Saving...":"Save Changes"]})})]})]})}e.s(["TradeDetailClient",()=>o],23980)}]);